<html>
<head>
  <title>Evernote Export</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/306387 (zh-CN, DDL); Windows/10.0.0 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="632"/>

<div>
<span><div><span style="font-weight: bold; font-size: 36pt;">关于listener监听器</span></div><div><br/></div><div><span style="font-weight: bold; font-size: 16pt;">一、概念</span></div><div><br/></div><div><span style="font-size: 15px; color: rgb(51, 51, 51); font-family: Verdana, Arial, Helvetica, sans-serif;">       监听器用于监听web应用中某些对象、信息的</span><span style="font-size: 15px;"><span style="font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 15px; color: rgb(209, 0, 255);">创建、销毁、增加，修改，删除</span></span><span style="font-size: 15px; color: rgb(51, 51, 51); font-family: Verdana, Arial, Helvetica, sans-serif;">等动作的发生，然后作出相应的响应处理。</span><span style="font-size: 15px; color: rgb(51, 51, 51); font-family: 黑体;">当范围对象的状态发生变化的时候，服务器自动调用监听器对象中的方法。常用于</span><span style="font-size: 16px; color: rgb(54, 101, 238); font-family: 黑体;">统计在线人数和在线用户，</span><span style="background-color: rgb(255, 255, 255); font-size: 16px; color: rgb(54, 101, 238); font-family: 黑体;">系统加载时进行信息初始化，</span><span style="font-size: 16px; color: rgb(54, 101, 238); font-family: 黑体;">统计网站的访问量</span><span style="font-size: 16px; color: rgb(51, 51, 51); font-family: 黑体;">等等。</span></div><div style="margin: 10px auto; list-style-type: none; list-style-image: none; font-size: 14px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font style="font-size: 14pt;"><span style="color: rgb(51, 51, 51); font-family: Verdana; font-size: 14pt; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; background-color: transparent;">二、</span><span style="color: rgb(51, 51, 51); font-family: 黑体; font-size: 14pt; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; background-color: transparent;">创建步骤：</span></font></span></div><div style="margin: 10px auto; list-style-type: none; list-style-image: none; font-size: 14px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="color: rgb(51, 51, 51); font-family: 黑体; font-size: 14pt; font-variant-caps: normal; font-variant-ligatures: normal;">         （一）创建一个实现监听器接口的类</span></span></div><div style="font-size: medium;"><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font style="font-size: 14pt;"><span style="font-size: 14px; color: rgb(68, 68, 68); font-family: Tahoma, Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">         （二）配置web.xml文件，注册监听器</span></font></span></div><div style="color: rgb(0, 0, 0); font-family: 微软雅黑; font-size: medium;"></div><div style="margin: 10px auto; list-style-type: none; list-style-image: none; font-size: 14px; background-color: rgb(255, 255, 255);"><span style="color: rgb(255, 0, 0); font-family: Tahoma, Arial, Helvetica, sans-serif; font-size: 14px;">监听器的启动顺序</span><span style="color: rgb(255, 0, 0); font-family: Tahoma, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 1.5;">：按照web.xml的配置顺序来启动</span></div><div style="margin: 10px auto; list-style-type: none; list-style-image: none; font-size: 14px; background-color: rgb(255, 255, 255);"><span style="background-color: transparent; color: rgb(255, 0, 0); font-family: Tahoma, Arial, Helvetica, sans-serif; font-size: 14px;">加载顺序：监听器&gt;过滤器&gt;Servlet</span></div><div><font style="font-size: 16pt;"><span style="font-family: 黑体; font-size: 16pt; font-weight: bold;">三、分类</span></font></div><div><br/></div><div><font style="font-size: 10pt;"><span style="color: rgb(51, 51, 51); font-family: 黑体; font-size: 10pt; font-weight: bold;">（一）</span></font><span style="font-size: 14px; font-family: Verdana, Arial, Helvetica, sans-serif;"><span style="font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 14px; font-weight: bold;">按监听的对象划分：</span>                </span></div><div style="box-sizing: border-box; margin: 0px; padding: 0px; list-style: disc;"><div><br/></div></div><div style="box-sizing: border-box; margin: 0px; padding: 0px; list-style: disc;"><span style="box-sizing: border-box; color: rgb(0, 0, 0); font-family: 黑体;">             </span><span style="box-sizing: border-box;"><span style="font-family: 黑体; color: rgb(77, 206, 29);">ServletContext</span></span><span style="font-family: 黑体; box-sizing: border-box;">对象监听器----</span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-family: Tahoma, Arial, Helvetica, sans-serif; color: rgb(68, 68, 68); font-variant-caps: normal; font-variant-ligatures: normal;">用于监听</span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-family: Tahoma, Arial, Helvetica, sans-serif; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal; color: rgb(250, 122, 0);">应用程序环境对象</span></span><span style="font-family: 黑体; box-sizing: border-box;">               </span></div><div style="box-sizing: border-box; margin: 0px; padding: 0px; list-style: disc;"><span style="box-sizing: border-box; color: rgb(0, 0, 0); font-family: 黑体;">             </span><span style="box-sizing: border-box;"><span style="font-family: 黑体; color: rgb(26, 173, 224);">HttpSession</span></span><span style="box-sizing: border-box; color: rgb(0, 0, 0); font-family: 黑体;">对象</span><span style="box-sizing: border-box; font-family: 黑体;">监听器-------<span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-family: Tahoma, Arial, Helvetica, sans-serif; color: rgb(68, 68, 68); font-variant-caps: normal; font-variant-ligatures: normal;">用于监听</span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-family: Tahoma, Arial, Helvetica, sans-serif; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal; color: rgb(250, 122, 0);">用户会话对象(HttpSeesion)</span></span></span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 0); font-family: 黑体;">           </span> <span style="box-sizing: border-box;"><span style="font-family: 黑体; color: rgb(147, 150, 0);"> ServletRequest</span></span><span style="box-sizing: border-box; color: rgb(0, 0, 0); font-family: 黑体;">对象</span><span style="box-sizing: border-box; font-family: 黑体;">监听器----<span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-family: Tahoma, Arial, Helvetica, sans-serif; color: rgb(68, 68, 68); font-variant-caps: normal; font-variant-ligatures: normal;">用于监听</span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-family: Tahoma, Arial, Helvetica, sans-serif; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal; color: rgb(250, 122, 0);">请求消息对象(ServletRequest)</span></span></span></div><div><br/></div><div><span style="font-size: 14px; font-weight: bold; font-family: Verdana, Arial, Helvetica, sans-serif;">（二）</span> <span style="font-size: 14px; font-weight: bold; font-family: Verdana, Arial, Helvetica, sans-serif;">按监听的事件划分</span></div><div><br/></div><div><span style="font-size: 14px; font-weight: bold; font-family: Verdana, Arial, Helvetica, sans-serif;">1、</span><span style="font-weight: bold; font-family: Verdana; font-size: 11pt;">对象</span><span style="font-weight: bold; font-family: Verdana; font-size: 11pt; font-style: italic;">自身的创建和销毁</span><span style="font-weight: bold; font-family: Verdana; font-size: 11pt;">的</span><span style="font-size: 11pt; font-weight: bold; font-family: Verdana;">监听器</span></div><div style="margin: 10px auto; padding: 0px; list-style-type: none; list-style-image: none; text-indent: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div><span style="color: rgb(68, 68, 68); font-family: Tahoma, Arial, Helvetica, sans-serif; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal;">①ServletContext的创建和销毁：</span><span style="color: rgb(0, 0, 255); font-family: Tahoma, Arial, Helvetica, sans-serif; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal;">contextInitialized方法和</span><span style="color: rgb(0, 0, 255); font-family: Tahoma, Arial, Helvetica, sans-serif; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal;">contextDestroyed方法</span></div></div><div style="background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); padding: 5px; overflow: auto; margin: 5px 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 12px !important;"><div style="margin: 0px; white-space: pre-wrap; word-wrap: break-word; padding: 0px; list-style-type: none; list-style-image: none; font-size: 12px !important;"><div style="font-size: 11pt;"><span style="font-size: 12px !important; color: rgb(0, 0, 255); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">public</span> <span style="font-size: 12px !important; color: rgb(0, 0, 255); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">void contextInitialized(ServletContextEvent sce)</span><span style="font-size: 12px !important; color: rgb(0, 128, 0); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">//</span><span style="font-size: 12px !important; color: rgb(0, 128, 0); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">ServletContext创建时调用</span></div><div style="font-size: 11pt;"><span style="font-size: 12px !important; color: rgb(0, 0, 255); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">public</span> <span style="font-size: 12px !important; color: rgb(0, 0, 255); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">void contextDestroyed(ServletContextEvent sce)</span><span style="font-size: 12px !important; color: rgb(0, 128, 0); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">//</span><span style="font-size: 12px !important; color: rgb(0, 128, 0); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">ServletContext销毁时调用</span></div></div></div><div><span style="text-indent: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: Tahoma, Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">主要用途：作为定时器、加载全局属性对象、创建全局数据库连接、加载缓存信息等</span></div><div style="margin: 10px auto; padding: 0px; list-style-type: none; list-style-image: none; text-indent: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="text-indent: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: Tahoma, Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;"> ②HttpSession的创建和销毁：</span><span style="text-indent: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(0, 0, 255); font-family: Tahoma, Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">sessionCreated和</span><span style="text-indent: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(0, 0, 255); font-family: Tahoma, Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">sessionDestroyed方法</span></div><div style="background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); padding: 5px; overflow: auto; margin: 5px 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 12px !important;"><div style="margin: 0px; white-space: pre-wrap; word-wrap: break-word; padding: 0px; list-style-type: none; list-style-image: none; font-size: 12px !important;"><div style="font-size: 11pt;"><span style="font-size: 12px !important; color: rgb(0, 0, 255); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">public</span> <span style="font-size: 12px !important; color: rgb(0, 0, 255); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">void sessionCreated(HttpSessionEvent se)</span><span style="font-size: 12px !important; color: rgb(0, 128, 0); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">//</span><span style="font-size: 12px !important; color: rgb(0, 128, 0); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">session创建时调用</span></div><div style="font-size: 11pt;"><span style="font-size: 12px !important; color: rgb(0, 0, 255); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">public</span> <span style="font-size: 12px !important; color: rgb(0, 0, 255); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">void sessionDestroyed(HttpSessionEvent se)</span><span style="font-size: 12px !important; color: rgb(0, 128, 0); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">//</span><span style="font-size: 12px !important; color: rgb(0, 128, 0); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">session销毁时调用</span></div></div></div><div><span style="text-indent: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: Tahoma, Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">主要用途：统计在线人数、记录访问日志等</span></div><div style="margin: 10px auto; padding: 0px; list-style-type: none; list-style-image: none; text-indent: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="text-indent: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: Tahoma, Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">③ServletRequest的</span><span style="color: rgb(68, 68, 68); font-family: Tahoma, Arial, Helvetica, sans-serif; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal;">创建和销毁：</span><span style="color: rgb(0, 0, 255); font-family: Tahoma, Arial, Helvetica, sans-serif; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal;">requestInitialized和</span><span style="color: rgb(0, 0, 255); font-family: Tahoma, Arial, Helvetica, sans-serif; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal;">requestDestroyed方法</span></div><div style="background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); padding: 5px; overflow: auto; margin: 5px 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 12px !important;"><div style="margin: 0px; white-space: pre-wrap; word-wrap: break-word; padding: 0px; list-style-type: none; list-style-image: none; font-size: 12px !important;"><div style="font-size: 11pt;"><span style="font-size: 12px !important; color: rgb(0, 0, 255); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">public</span> <span style="font-size: 12px !important; color: rgb(0, 0, 255); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">void requestInitialized(ServletRequestEvent sre)</span><span style="font-size: 12px !important; color: rgb(0, 128, 0); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">//</span><span style="font-size: 12px !important; color: rgb(0, 128, 0); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">request创建时调用</span></div><div style="font-size: 11pt;"><span style="font-size: 12px !important; color: rgb(0, 0, 255); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">public</span> <span style="font-size: 12px !important; color: rgb(0, 0, 255); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">void requestDestroyed(ServletRequestEvent sre)</span><span style="font-size: 12px !important; color: rgb(0, 128, 0); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">//</span><span style="font-size: 12px !important; color: rgb(0, 128, 0); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">request销毁时调用</span></div></div></div><div><span style="font-size: 14px; color: rgb(68, 68, 68); font-family: Tahoma, Arial, Helvetica, sans-serif;">主要用途：读取request参数，记录访问历史</span></div><div style="box-sizing: border-box; margin: 0px; padding: 0px; list-style: disc;"><div><br/></div></div><div style="box-sizing: border-box; margin: 0px; padding: 0px; list-style: disc;"><span style="box-sizing: border-box; font-size: 11pt; font-weight: bold; color: rgb(0, 0, 0); font-family: Verdana;">2、对象中<span style="font-weight: bold; color: rgb(0, 0, 0); font-family: Verdana; font-size: 11pt; font-style: italic;">属性的创建和消除</span></span><span style="box-sizing: border-box; font-size: 11pt; font-weight: bold; color: rgb(0, 0, 0); font-family: Verdana;">的</span><span style="box-sizing: border-box; font-size: 11pt; font-weight: bold; color: rgb(0, 0, 0); font-family: Verdana;">监听器</span></div><div style="box-sizing: border-box; margin: 0px; padding: 0px; list-style: disc;"></div><div style="margin: 10px auto; padding: 0px; list-style-type: none; list-style-image: none; text-indent: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="text-indent: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: Tahoma, Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">根据监听对象不同分别实现</span><span style="text-indent: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(0, 0, 255); font-family: Tahoma, Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">ServletContextAttributeListener、</span><span style="text-indent: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(0, 0, 255); font-family: Tahoma, Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">HttpSessionAttributeListener、</span><span style="text-indent: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(0, 0, 255); font-family: Tahoma, Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">ServletRequestAttributeListener接口。</span></div><div style="box-sizing: border-box; margin: 0px; padding: 0px; list-style: disc;"><div><span style="font-size: 14px; color: rgb(68, 68, 68); font-family: Tahoma, Arial, Helvetica, sans-serif; line-height: 1.5;">实现方法：</span><span style="font-size: 14px; color: rgb(0, 0, 255); font-family: Tahoma, Arial, Helvetica, sans-serif; line-height: 1.5;">attributeAdded</span><span style="font-size: 14px; background-color: rgb(255, 255, 255); font-family: Tahoma, Arial, Helvetica, sans-serif; line-height: 1.5;">、attributeRemoved</span><span style="font-size: 14px; font-family: Tahoma, Arial, Helvetica, sans-serif; line-height: 1.5;">、attributeReplaced</span></div></div><div style="box-sizing: border-box; margin: 0px; padding: 0px; list-style: disc;"><span style="font-size: 11pt; font-weight: bold; font-family: Verdana;">3、session中的<span style="font-weight: bold; font-family: Verdana; font-size: 11pt; font-style: italic;">某个对象的状态变化</span></span><span style="font-size: 11pt; font-weight: bold; font-family: Verdana;">的</span><span style="font-size: 11pt; font-weight: bold; font-family: Verdana;">监听器</span></div><div style="box-sizing: border-box; margin: 0px; padding: 0px; list-style: disc;"></div><div style="margin: 10px auto; padding: 0px; list-style-type: none; list-style-image: none; text-indent: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="text-indent: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: Tahoma, Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">HttpSession中的对象状态：绑定→解除绑定；钝化→活化</span></div><div style="margin: 10px auto; padding: 0px; list-style-type: none; list-style-image: none; text-indent: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="text-indent: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: Tahoma, Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">实现接口及方法：</span><span style="text-indent: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(0, 0, 255); font-family: Tahoma, Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">HttpSessionBindingListener接口(</span><span style="text-indent: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(0, 0, 255); font-family: Tahoma, Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">valueBound和</span><span style="text-indent: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(0, 0, 255); font-family: Tahoma, Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">valueUnbound方法)、</span><span style="text-indent: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(0, 0, 255); font-family: Tahoma, Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">HttpSessionActivationListener接口(</span><span style="text-indent: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(0, 0, 255); font-family: Tahoma, Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">sessionWillPassivate和</span><span style="text-indent: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(0, 0, 255); font-family: Tahoma, Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">sessionDidActivate方法)</span></div><div style="margin: 10px auto; padding: 0px; list-style-type: none; list-style-image: none; text-indent: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="text-indent: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: Tahoma, Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">【注1】①要实现钝化和活化必须实现Serializable接口</span></div><div style="margin: 10px auto; padding: 0px; list-style-type: none; list-style-image: none; text-indent: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="text-indent: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: Tahoma, Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">           ②不需要在web.xml中注册</span></div><div style="margin: 10px auto; padding: 0px; list-style-type: none; list-style-image: none; text-indent: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="text-indent: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: Tahoma, Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">【注2】</span></div><div style="margin: 10px auto; padding: 0px; list-style-type: none; list-style-image: none; text-indent: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="text-indent: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: Tahoma, Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">　　绑定：　　　　通过setAttribute保存到session对象当中</span></div><div style="margin: 10px auto; padding: 0px; list-style-type: none; list-style-image: none; text-indent: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="text-indent: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: Tahoma, Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">　　解除绑定：　　通过removeAttribue去除</span></div><div style="margin: 10px auto; padding: 0px; list-style-type: none; list-style-image: none; text-indent: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="text-indent: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: Tahoma, Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">　　钝化：　　　　将session对象持久化到存储设备上</span></div><div style="margin: 10px auto; padding: 0px; list-style-type: none; list-style-image: none; text-indent: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="text-indent: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: Tahoma, Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">　　活化：　　　　将session对象从存储设备上进行恢复</span></div><div style="margin: 10px auto; padding: 0px; list-style-type: none; list-style-image: none; text-indent: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="text-indent: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: Tahoma, Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">　　session钝化机制：</span></div><div style="margin: 10px auto; padding: 0px; list-style-type: none; list-style-image: none; text-indent: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="text-indent: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(68, 68, 68); font-family: Tahoma, Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">　　　　①把服务器不常使用的session对象暂时序列化到系统文件或者是数据库中，当使用时反序列化到内存中，整个过程由服务器自动完成；</span></div><div style="box-sizing: border-box; margin: 0px; padding: 0px; list-style: disc;"><div><span style="text-indent: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(68, 68, 68); font-family: Tahoma, Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">　　　　②session的钝化机制由SessionManager管理，创建一个普通的JavaBean绑定和接触需要实现HttpSessionBindingListener接口</span></div></div><div style="box-sizing: border-box; margin: 0px; padding: 0px; list-style: disc;"><div><br/></div></div><div style="box-sizing: border-box; margin: 0px; padding: 0px; list-style: disc;"><div><span style="text-indent: 0px; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font style="font-size: 16pt;"><span style="color: rgb(68, 68, 68); font-family: Tahoma; font-variant-caps: normal; font-variant-ligatures: normal; font-size: 16pt; font-weight: bold;">三、示例</span></font></span></div></div><div style="box-sizing: border-box; margin: 0px; padding: 0px; list-style: disc;"></div><div style="box-sizing: border-box; margin: 10px auto; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">    （一）用监听器统计网站在线人数</span></div><div style="box-sizing: border-box; margin: 10px auto; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">           </span> <span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">原理：每当有一个访问连接到服务器时，服务器就会创建一个session来管理会话。那么我们就可以通过统计session的数量来获得当前在线人数。</span></div><div style="box-sizing: border-box; margin: 10px auto; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">    所以这里用到的是HttpSessionListener。</span></div><div style="box-sizing: border-box; margin: 0px; padding: 0px; list-style: disc;"><div><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">    </span><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">1：创建监听器类，实现</span><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal; color: rgb(255, 0, 0);">HttpSessionListener</span></span><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">接口。</span></div></div><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">    2：重写监听器类中的方法</span></div><div style="font-size: 11pt;"><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: Tahoma; font-size: 11pt;"><font color="#000000">public class onLineCount implements</font> <font color="#FF0000">HttpSessionListener</font> <font color="#000000">{</font></span></div><div><span style="font-family: Tahoma; font-size: 11pt; color: rgb(0, 0, 0);">   </span> <span style="font-family: Tahoma; font-size: 11pt;"><font color="#AD0000">//记录session的数量</font></span></div><div><span style="font-family: Tahoma; font-size: 11pt;"><font style="color: rgb(0, 0, 0);">    public int count=0;</font></span></div><div><span style="font-family: Tahoma; font-size: 11pt; color: rgb(0, 0, 0);">   </span> <span style="font-family: Tahoma; font-size: 11pt;"><font color="#AD0000">//监听session的创建</font></span></div><div><span style="font-family: Tahoma; font-size: 11pt;"><font color="#000000">    public void</font> <font color="#A600C4">sessionCreated</font><font style="color: rgb(0, 0, 0);">(HttpSessionEvent arg0) {</font></span></div><div><span style="font-family: Tahoma; font-size: 11pt;"><font color="#000000">        </font><font color="#FF0000">count++;</font></span></div><div><span style="font-family: Tahoma; font-size: 11pt;"><font color="#000000">        <b>arg0.getSession().getServletContext().setAttribute(&quot;Count&quot;, count);</b></font></span></div><div><span style="font-family: Tahoma; font-size: 11pt;"><font color="#000000">    }</font></span></div><div><span style="font-family: Tahoma; font-size: 11pt;"><span style="color: rgb(0, 0, 0); font-family: Tahoma; font-size: 11pt;"> </span> <span style="font-family: Tahoma; font-size: 11pt;"><font color="#AD0000">  //监听session的撤销</font></span></span></div><div><span style="font-family: Tahoma; font-size: 11pt;"><font color="#000000">    public void</font> <font color="#A600C4">sessionDestroyed</font><font style="color: rgb(0, 0, 0);">(HttpSessionEvent arg0) {</font></span></div><div><span style="font-family: Tahoma; font-size: 11pt;"><font color="#000000">        </font><font color="#FF0000">count--;</font></span></div><div><span style="font-family: Tahoma; font-size: 11pt;"><font color="#000000">        <b>arg0.getSession().getServletContext().setAttribute(&quot;Count&quot;, count);</b></font></span></div><div><span style="font-family: Tahoma; font-size: 11pt;"><font color="#000000">    }</font></span></div><div><span style="font-family: Tahoma; font-size: 11pt;"><font color="#000000">}</font></span></div></div><div style="font-size: 11pt;"><br/></div><div style="box-sizing: border-box; margin: 10px auto; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">  3：在web.xml中配置监听器。注意：</span><span style="box-sizing: border-box; font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(255, 0, 0); font-family: 黑体; font-variant-caps: normal; font-variant-ligatures: normal;">监听器&gt;过滤器&gt;serlvet，配置的时候要注意先后顺序</span></div><div style="box-sizing: border-box; margin: 5px 0px; padding: 5px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); overflow: auto; font-size: 12px !important;"><div style="box-sizing: border-box; font-size: 13px; white-space: pre-wrap; padding: 0px; margin: 0px; word-break: break-all; word-wrap: break-word; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); border-radius: 4px;"><div style="font-size: 11pt;"><span style="font-size: 11pt; color: rgb(68, 68, 68); font-family: Tahoma; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.42857;">&lt;listener&gt;</span></div><div style="font-size: 11pt;"><span style="font-size: 11pt; color: rgb(68, 68, 68); font-family: Tahoma; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.42857;">&lt;listener-</span><span style="box-sizing: border-box; font-size: 11pt; color: rgb(0, 0, 255); font-family: Tahoma; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">class</span><span style="font-size: 11pt; color: rgb(68, 68, 68); font-family: Tahoma; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.42857;">&gt;com.ygj.control.onLineCount&lt;/listener-</span><span style="box-sizing: border-box; font-size: 11pt; color: rgb(0, 0, 255); font-family: Tahoma; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.5;">class</span><span style="font-size: 11pt; color: rgb(68, 68, 68); font-family: Tahoma; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.42857;">&gt;</span></div><div style="font-size: 11pt;"><span style="font-size: 11pt; color: rgb(68, 68, 68); font-family: Tahoma; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.42857;">&lt;/listener&gt;</span></div></div></div><div><br/></div><div><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(51, 51, 51); font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">    在Servlet3.0中，监听器的配置可以直接在代码中通过注释来完成，无需在web.xml中再配置。</span></div><div style="font-size: 11pt;"><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: Tahoma; font-size: 11pt;"><font color="#FF0000">@WebListener</font></span><span style="font-family: Tahoma; font-size: 11pt; color: rgb(68, 68, 68);">  </span><span style="font-family: Tahoma; font-size: 11pt;"><font color="#AD0000"> //在此注明以下类是监听器</font></span></div><div><span style="font-family: Tahoma; font-size: 11pt; color: rgb(68, 68, 68);">public class onLineCount implements HttpSessionListener {</span></div><div><br style="font-family: Tahoma; font-size: 11pt; color: rgb(68, 68, 68);"/></div><div><span style="font-family: Tahoma; font-size: 11pt; color: rgb(68, 68, 68);">    public int count=0;</span></div><div><span style="font-family: Tahoma; font-size: 11pt; color: rgb(68, 68, 68);">    public void sessionCreated(HttpSessionEvent arg0) {</span></div><div><span style="font-family: Tahoma; font-size: 11pt; color: rgb(68, 68, 68);">        count++;</span></div><div><span style="font-family: Tahoma; font-size: 11pt; color: rgb(68, 68, 68);">        arg0.getSession().getServletContext().setAttribute(&quot;Count&quot;, count);</span></div><div><br style="font-family: Tahoma; font-size: 11pt; color: rgb(68, 68, 68);"/></div><div><span style="font-family: Tahoma; font-size: 11pt; color: rgb(68, 68, 68);">    }</span></div><div><br style="font-family: Tahoma; font-size: 11pt; color: rgb(68, 68, 68);"/></div><div><span style="font-family: Tahoma; font-size: 11pt; color: rgb(68, 68, 68);">    @Override</span></div><div><span style="font-family: Tahoma; font-size: 11pt; color: rgb(68, 68, 68);">    public void sessionDestroyed(HttpSessionEvent arg0) {</span></div><div><span style="font-family: Tahoma; font-size: 11pt; color: rgb(68, 68, 68);">        count--;</span></div><div><span style="font-family: Tahoma; font-size: 11pt; color: rgb(68, 68, 68);">        arg0.getSession().getServletContext().setAttribute(&quot;Count&quot;, count);</span></div><div><span style="font-family: Tahoma; font-size: 11pt; color: rgb(68, 68, 68);">    }</span></div></div><div style="font-size: 11pt;"><br/></div><div><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;"> </span><span style="font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal; color: rgb(51, 51, 51);">4：在显示在线人数处通过</span><span style="font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; color: rgb(106, 0, 129);">session.getAttribute(&quot;Count&quot;)</span><span style="font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal; color: rgb(51, 51, 51);">即可获取在线人数值。</span></span></div><div style="box-sizing: border-box; margin: 10px auto; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div><br/></div></div><div style="box-sizing: border-box; margin: 10px auto; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font style="font-size: 16pt;"><span style="color: rgb(51, 51, 51); font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; font-size: 16pt; font-weight: bold;">四、</span><span style="box-sizing: border-box; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(51, 51, 51); font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; font-size: 16pt; font-weight: bold;">常用的监听器</span></font></div><div style="box-sizing: border-box; margin: 10px auto; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(51, 51, 51); font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;"> </span><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(51, 51, 51); font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">除了上面监听session建立与销毁的listener外，还有以下几个常用的监听器。</span></div><div style="box-sizing: border-box; margin: 10px auto; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal; color: rgb(51, 51, 51);">    1：监听session属性的增加、移除以及属性值改变的</span><span style="font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; color: rgb(222, 87, 0);">HttpSessionAttributeListener</span></span></div><div style="box-sizing: border-box; margin: 10px auto; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="color: rgb(51, 51, 51); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal;"><img src="http://images2015.cnblogs.com/blog/1018541/201702/1018541-20170213094836004-353226634.png" style="box-sizing: border-box; border: none; vertical-align: middle; outline: 0px; max-width: 100%; margin: 0px; padding: 0px; font-family: Verdana; font-size: 11pt; color: rgb(51, 51, 51);"></img> <img src="http://images2015.cnblogs.com/blog/1018541/201702/1018541-20170213094836004-353226634.png" style="font-family: Verdana; font-size: 11pt; color: rgb(51, 51, 51);"></img></span><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Verdana; font-variant-caps: normal; font-variant-ligatures: normal;"> <img src="关于listener监听器_files/1.png" type="image/png" data-filename="1.png" style="font-family: Verdana; font-size: 11pt; color: rgb(51, 51, 51);"/></span></div><div style="box-sizing: border-box; margin: 10px auto; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal; color: rgb(51, 51, 51);">    2：监听web上下文的初始化（服务器已准备好接收请求）与销毁的</span><span style="font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; color: rgb(222, 87, 0);">ServletContextListener</span></span></div><div style="box-sizing: border-box; margin: 10px auto; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="color: rgb(51, 51, 51); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal;"><img src="http://images2015.cnblogs.com/blog/1018541/201702/1018541-20170213095315894-769267488.png" style="box-sizing: border-box; border: none; vertical-align: middle; outline: 0px; max-width: 100%; margin: 0px; padding: 0px; font-family: Verdana; font-size: 11pt; color: rgb(51, 51, 51);"></img><img src="关于listener监听器_files/2.png" type="image/png" data-filename="2.png" style="font-family: Verdana; font-size: 11pt; color: rgb(51, 51, 51);"/></span></div><div style="box-sizing: border-box; margin: 10px auto; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal; color: rgb(51, 51, 51);">    3：监听web上下文属性的增加、删除、属性值变化的</span><span style="font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; color: rgb(222, 87, 0);">ServletContextAttributeListener</span></span></div><div style="box-sizing: border-box; margin: 10px auto; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">  </span><span style="color: rgb(51, 51, 51); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal;"><img src="http://images2015.cnblogs.com/blog/1018541/201702/1018541-20170213095503066-658537909.png" style="box-sizing: border-box; border: none; vertical-align: middle; outline: 0px; max-width: 100%; margin: 0px; padding: 0px; font-family: Verdana; font-size: 11pt; color: rgb(51, 51, 51);"></img><img src="关于listener监听器_files/3.png" type="image/png" data-filename="3.png" style="font-family: Verdana; font-size: 11pt; color: rgb(51, 51, 51);"/></span></div><div style="box-sizing: border-box; margin: 10px auto; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal; color: rgb(51, 51, 51);">    4：监听request的创建与销毁的</span><span style="font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; color: rgb(222, 87, 0);">ServletRequestListener</span></span></div><div style="box-sizing: border-box; margin: 10px auto; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="color: rgb(51, 51, 51); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal;"><img src="http://images2015.cnblogs.com/blog/1018541/201702/1018541-20170213101310754-1052616317.png" style="box-sizing: border-box; border: none; vertical-align: middle; outline: 0px; max-width: 100%; margin: 0px; padding: 0px; font-family: Verdana; font-size: 11pt; color: rgb(51, 51, 51);"></img><img src="关于listener监听器_files/4.png" type="image/png" data-filename="4.png" style="font-family: Verdana; font-size: 11pt; color: rgb(51, 51, 51);"/></span></div><div style="box-sizing: border-box; margin: 10px auto; padding: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; font-size: 14px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal; color: rgb(51, 51, 51);">    5：监听request的属性的增加、删除、属性值变化的</span><span style="font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 14px; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; color: rgb(222, 87, 0);">ServletRequestAttributeListener</span></span></div><div><img src="http://images2015.cnblogs.com/blog/1018541/201702/1018541-20170213101441879-2099840265.png" style="box-sizing: border-box; border: none; vertical-align: middle; outline: 0px; max-width: 100%; margin: 0px; padding: 0px; font-family: Verdana; font-size: 11pt; color: rgb(51, 51, 51);"></img></div><div><img src="关于listener监听器_files/5.png" type="image/png" data-filename="5.png" style="font-family: Verdana;"/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div></span>
</div></body></html> 