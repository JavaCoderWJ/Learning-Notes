<html>
<head>
  <title>Evernote Export</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/306387 (zh-CN, DDL); Windows/10.0.0 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="366"/>

<div>
<span><div><font style="font-size: 36pt;"><span style="font-size: 36pt; font-weight: bold;">jsp基础</span></font></div><div>一、JSP注释</div><div>   定义显示注释和隐式注释：</div><div>   &lt;!--客户端查看源文件可以看得见--&gt;</div><div>   &lt;%--JSP中的注释，客户端无法看见--%&gt;</div><div>   &lt;%</div><div>       //Java提供的单行注释（客户端无法看见）</div><div>       /*</div><div>         多行注释（客户端无法看见）</div><div>       */</div><div>   %&gt;</div><div><br/></div><div>二、Scriptlet(脚本小程序)</div><div>   （1）&lt;%%&gt;</div><div>    可以定义局部变量，编写语句等。</div><div>   （2）&lt;%!%&gt;</div><div>    定义全局变量、方法、类。</div><div>    注意：尽量不要用此Scriptlet定义方法和类，开发者往往会采用Java Bean的形式</div><div>   （3）&lt;%=%&gt;</div><div>    输出一个变量或者一个常量，也称“表达式输出”</div><div>    表达式输出相对out.println()输出更好，更加方便。</div><div><br/></div><div>三、Scriptlet标签</div><div>    程序中如果使用过多的&lt;%%&gt;会使得程序混乱，所以在新版本的jsp中，可以使用下面的标签进行代替</div><div>    &lt;jsp:scriptlet&gt;</div><div>         java scriptlet代码</div><div>    &lt;/jsp:scriptlet&gt;</div><div><br/></div><div>四、page指令</div><div>    定义：定义一个jsp页面的相关属性，包括设置MIME类型、定义需要导入的包、错误页的指定等。</div><div>    语法：</div><div>         &lt;%@ page 属性=&quot;内容&quot;%&gt;</div><div>    常用的属性有：</div><div>------------------------------------------------------------------------------------------------------------------------------</div><div>          autoFlush:可以设置成true或者false，如果设置成ture，当缓冲区满时，客户端的输出会被刷新，如果设置                    </div><div>                    成false，当缓冲区满时，将出现异常。</div><div>          buffer:</div><div>          contentType:</div><div>          errorPage:</div><div>          extends:</div><div>          import:</div><div>          info:</div><div>          isErrorPage:</div><div>          isThreadSafe:</div><div>          language:</div><div>          pageEncoding:</div><div>          session:</div><div>(Java web 开发实战经典P98)</div><div>-------------------------------------------------------------------------------------------------------------------------------</div><div>    （1）设置页面MIME</div><div>         为JSP页面指定编码</div><div>         &lt;%@ page language=&quot;java&quot; contentType=&quot;text/html&quot;;charset=&quot;GBK&quot;%&gt;</div><div>         page指令中指定了要使用的开发语言为java，然后通过contentType进行MIME类型设置，</div><div>                 按照HTML文本文件（text/html）进行显示，页面编码是（GBK）</div><div>         MIME类型：可以从Tomcat安装目录/conf/web.xml中可以查询到所有已知的MIME类型</div><div>         （如果想让页面按照word文档显示，可以将上面代码中&quot;text/html&quot;改为&quot;application/msword&quot;）</div><div><br/></div><div>    （2）设置文件源码</div><div>         &lt;%@ page language=&quot;java&quot; contentType=&quot;text/html&quot;;pageEncoding=&quot;GBK&quot;%&gt;</div><div>         在JSP中，如果pageEncoding存在，那么JSP的编码将由pageEncoding决定否则将由contentType中的charset属性决定；如果两者都不存在，则将使用ISO-8859-1的编码方式。</div><div>         上面是说的第一阶段，第二阶段会使用utf-8编码，第三阶段就是TOMCAT生成的网页，此时使用的才是contentType。</div><div>         一般情况下只用设置pageEncoding设置编码就可以了。</div><div><br/></div><div>    （3）错误页的设置</div><div>         满足条件：</div><div>         ①指定错误出现的跳转页：通过&lt;%@ page errorPage=&quot;.jsp文件&quot;%&gt; (一旦出现错误就跳转到.jsp文件中)</div><div>         ②错误处理页必须有明确的标识：通过&lt;%@ page isErrorPage=&quot;true&quot;%&gt; (表示此页面可以处理错误)</div><div>         注意：此跳转属于服务器端跳转，地址栏的地址没有变化。</div><div>               有时候可能出现无法跳转的错误页，这是因为可能错误页也出现错误了，这个时候我们可以这样编写：</div><div>               在psge属性设置后面加一条：&lt;% response.setStatus(200); %&gt;   (表示本页没有错误)</div><div><br/></div><div>    （4）数据库连接操作</div><div>         实例：</div><div>---------------------------------------------------------------------------------------------------------------------------------</div><div>         &lt;%@ page contentType=&quot;text/html&quot; pageEncoding=&quot;GBK&quot;%&gt;</div><div>         &lt;%@ page iimport=&quot;java.sql.*&quot;%&gt;   //导入SQL包</div><div>         &lt;html&gt;</div><div>         &lt;head&gt;&lt;title&gt;标题&lt;/title&gt;&lt;/head&gt;</div><div>         &lt;body&gt;</div><div>         &lt;%!</div><div>             //定义数据库驱动程序</div><div>             public static final String DBDRIVER=&quot;com.mysql.jdbc.Driver&quot;;</div><div>             //数据库连接地址</div><div>             public static final String DBURL=&quot;jdbc:<a href="mysql://localhost:3306/">mysql://localhost:3306/</a>数据库名&quot;;</div><div>             public static final String DBUSER=&quot;root&quot;; //数据库连接用户名，一般情况下都会是root</div><div>             public static final String DBPASS=&quot;数据库连接密码&quot;;</div><div>         %&gt;</div><div><br/></div><div>         &lt;%</div><div>             Connection conn=null;</div><div>             PreparedStatement pstmt=null;</div><div>             ResultSet rs=null;</div><div>         %&gt;</div><div><br/></div><div>         &lt;%</div><div>             try{ //数据库操作中会出现异常，所以 用try、、、catch语句处理</div><div>                  Class.forName(DBDRIVER);</div><div>                  conn=DriverManager.getConnection(UBURL,DBUSER,DBPASS);</div><div>                  String sql=&quot;数据库操作语句&quot;;      //根据需要编写数据库操作语句</div><div>                  pstmt=conn.prepareStatement(sql);</div><div>                  rs=pstmt.executeQuery();</div><div>                 }</div><div>         %&gt;</div><div>         之后再根据需要从数据表从提取数据：例如从数据表中提取一个人的姓名：String name=rs.getString(1);</div><div>       (一个简单的数据连接实例：<a href="http://blog.csdn.net/kirinlau/article/details/53182789">http://blog.csdn.net/kirinlau/article/details/53182789</a> )</div><div>----------------------------------------------------------------------------------------------------------------------------------</div><div>五、包含指令</div><div>     include指令是文件加载指令，用于在JSP中插入一个包含文件或代码的文件，这个包含的过程是静态包含。</div><div>     它把文件插入后与原来的JSP文件合并成一个新的JSP页面（注意：如果被插入的内容发送改变，则包含这个页面的JSP文件就需要重新编译）。</div><div>     使用include指令可以方便的把在多个页面中要重复显示的内容抽取出来，大大的减少代码的重复量，方便我们对重复内容的维护。</div><div><br/></div><div>     include指令的语法格式：</div><div>     &lt;%@ include file=&quot;被包含文件地址&quot; %&gt;</div><div><br/></div><div>     include指令只有一个file属性，该属性用于指定插入到JSP页面当前位置的文件资源。（注意：插入的路径一般使用相对路径）</div><div>     被插入文件可以是一个JSP文件、HTML文件、文本文件或一段Java代码，单要保证被插入的文件是可访问的。</div><div><br/></div><div>     实例：</div><div><br/></div><div>     定义包含页：</div><div>    &lt;%@ page language=&quot;java&quot;  contentType=&quot;text/html&quot;   pageEncoding=&quot;GBK&quot;%&gt;</div><div>    &lt;html&gt;</div><div>    &lt;head&gt;</div><div>    &lt;title&gt;jsp:include&lt;/title&gt;</div><div>    &lt;/head&gt;</div><div>    &lt;body&gt;</div><div>    &lt;h1&gt;静态包含操作&lt;/h1&gt;</div><div>    &lt;%@  include file=&quot;test.html&quot;%&gt;</div><div>    &lt;%@  include file=&quot;test.jsp&quot;%&gt;</div><div>    &lt;%@  include file=&quot;test.inc&quot;%&gt;</div><div>    &lt;/body&gt;</div><div>    &lt;/html&gt;</div><div><br/></div><div>    定义test.html页面</div><div>    &lt;html&gt;</div><div>    &lt;head&gt;</div><div>    &lt;metacharset=&quot;UTF-8&quot;&gt;</div><div>    &lt;title&gt;test.html&lt;/title&gt;</div><div>    &lt;/head&gt;</div><div>    &lt;body&gt;</div><div>    this is test.html file!</div><div>    &lt;/body&gt;</div><div>    &lt;/html&gt;</div><div><br/></div><div>    定义test.jsp页面</div><div>    &lt;html&gt;</div><div>    &lt;head&gt;</div><div>    &lt;title&gt;test.jsp&lt;/title&gt;</div><div>    &lt;/head&gt;</div><div>    &lt;body&gt;</div><div>    &lt;%=&quot;this is a include test！&quot; %&gt;</div><div>    &lt;/body&gt;</div><div>    &lt;/html&gt;</div><div><br/></div><div>    定义test.inc页面</div><div>    This is test.inc file!</div><div>    结果为：</div><div><br/></div><div>    this is test.html file!</div><div>    this is a include test！</div><div>    This is test.inc file!</div><div><br/></div><div>    注：在以上的静态包含中，实际上是先将所包含的3个文件的内容导入到包含页中，然后在一起进行编译，</div><div>    最后再将以份整齐的内容展现给用户，即：先包含，再集中进行编译处理。</div><div>   （动态包含参考：<a href="http://blog.csdn.net/chentiefeng521/article/details/51802062">http://blog.csdn.net/chentiefeng521/article/details/51802062</a> ）</div><div>六 跳转指令</div><div>    将一个用户的请求（request）从一个页面传递到另一个页面，完成跳转操作。</div><div>    实例：</div><div><br/></div><div>    跳转前 A.jsp</div><div>    &lt;%</div><div>       String username=&quot;WJ&quot;;</div><div>    %&gt;</div><div>    &lt;jsp:forward page=&quot;B.jsp&quot;&gt;</div><div>         &lt;jsp:param name=&quot;name&quot; value=&quot;&lt;%=username%&gt;&quot;/&gt;  设置参数，参数名    </div><div>    &lt;/jsp:forward&gt;</div><div>    跳转后 B.jsp</div><div>    &lt;h2&gt;</div><div>       &lt;%=request.getPrameter(&quot;name&quot;)%&gt;    //根据跳转前参数名，进行参数接收，getPrameter（）方法</div><div>    &lt;/h2&gt;</div><div>    </div><div>    上述跳转也属于服务器端跳转。</div><div>七 JSP+JDBC 用户登录程序实现</div><div><br/></div><div>   基本思路：</div><div>          创建数据表存储用户名及密码信息</div><div>          用户登录表单html</div><div>          登录检查页jsp</div><div>          登录成功提示页jsp</div><div>          登录失败提示页jsp</div><div><br/></div><div>   实例参考：<a href="http://blog.csdn.net/pangqiandou/article/details/52713827">http://blog.csdn.net/pangqiandou/article/details/52713827</a></div><div><br/></div></span>
</div></body></html> 