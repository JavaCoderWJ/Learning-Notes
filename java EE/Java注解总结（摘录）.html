<html>
<head>
  <title>Evernote Export</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/306387 (zh-CN, DDL); Windows/10.0.0 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="675"/>

<div>
<span><div><h2 style="box-sizing: border-box; font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun; font-weight: bold; line-height: 32px; color: rgb(79, 79, 79); margin: 8px 0px 16px; padding: 0px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font style="font-size: 36pt;">Java注解总结（摘录）</font></h2><h2 style="box-sizing: border-box; font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun; font-weight: bold; line-height: 32px; color: rgb(79, 79, 79); margin: 8px 0px 16px; font-size: 24px; padding: 0px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun; font-weight: bold; line-height: 32px; color: rgb(79, 79, 79); font-size: 24px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;">前言</span></h2><div style="box-sizing: border-box; margin: 0px 0px 16px; padding: 0px; font-size: 16px; line-height: 26px; text-align: justify; font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="color: rgb(79, 79, 79); box-sizing: border-box; font-size: 16px; line-height: 26px; font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;">注解是java引入的一项非常受欢迎的补充，它提供了一种结构化的，并且具有</span><span style="box-sizing: border-box; font-size: 16px; line-height: 26px; font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font style="color: rgb(255, 0, 0);">类型检查能力</font></span><span style="color: rgb(79, 79, 79); box-sizing: border-box; font-size: 16px; line-height: 26px; font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;">的新途径，从而使得程序员能够为代码加入元数据，而不会导致代码杂乱且难以阅读。使用注解能够帮助我们<u>避免编写累赘的部署描述文件，以及其他生成的文件</u>。</span></div><div style="box-sizing: border-box; margin: 0px 0px 16px; padding: 0px; font-size: 16px; color: rgb(79, 79, 79); line-height: 26px; text-align: justify; font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; font-size: 16px; color: rgb(79, 79, 79); line-height: 26px; font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;">注解的语法比较简单，除了@符号的使用之外，它基本与java固有的语法一致。但由于java源码中提供的内置注解很少，所以大部分同学对注解都不是很了解，虽然我们都接触过，比如java内置的几种注解：</span></div><div style="box-sizing: border-box; font-family: Consolas, Inconsolata, Courier, monospace; font-size: 14px; white-space: pre-wrap; padding: 8px 16px 4px 56px; margin: 0px 0px 24px; line-height: 22px; color: rgb(0, 0, 0); word-break: break-all; word-wrap: break-word; background-color: rgb(246, 248, 250); border: none; border-radius: 4px; position: relative; overflow-y: hidden; overflow-x: auto; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div><span style="box-sizing: border-box; font-family: Consolas, Inconsolata, Courier, monospace; font-size: 14px; color: rgb(0, 0, 0); white-space: pre; background-color: rgb(246, 248, 250); border-radius: 4px; line-height: 22px; overflow-x: auto; word-wrap: normal;">@Override，表示当前的方法定义将覆盖超类中的方法。</span></div><div><span style="box-sizing: border-box; font-family: Consolas, Inconsolata, Courier, monospace; font-size: 14px; color: rgb(0, 0, 0); white-space: pre; background-color: rgb(246, 248, 250); border-radius: 4px; line-height: 22px; overflow-x: auto; word-wrap: normal;">@Deprecated，表示当前方法即将废弃，不推荐使用。</span></div><div><span style="box-sizing: border-box; font-family: Consolas, Inconsolata, Courier, monospace; font-size: 14px; color: rgb(0, 0, 0); white-space: pre; background-color: rgb(246, 248, 250); border-radius: 4px; line-height: 22px; overflow-x: auto; word-wrap: normal;">@SuppressWarnings，表示忽略编译器的警告信息。</span></div></div><div style="box-sizing: border-box; margin: 0px 0px 16px; padding: 0px; font-size: 16px; color: rgb(79, 79, 79); line-height: 26px; text-align: justify; font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; font-size: 16px; color: rgb(79, 79, 79); line-height: 26px; font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">但这并不能让我们体会到注解的强大和便利，其实Java还另外提供了四种注解，专门负责新注解的创建。今天我们就来学习下怎么创建和使用注解。</span></div><h2 style="box-sizing: border-box; font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun; font-weight: bold; line-height: 32px; color: rgb(79, 79, 79); margin: 8px 0px 16px; font-size: 24px; padding: 0px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun; font-weight: bold; line-height: 32px; color: rgb(79, 79, 79); font-size: 24px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">注解类的定义</span></h2><div style="box-sizing: border-box; margin: 0px 0px 16px; padding: 0px; font-size: 16px; color: rgb(79, 79, 79); line-height: 26px; text-align: justify; font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; font-size: 16px; color: rgb(79, 79, 79); line-height: 26px; font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;">首先看看一个注解类的定义：</span></div><div style="box-sizing: border-box; font-family: Consolas, Inconsolata, Courier, monospace; font-size: 14px; white-space: pre-wrap; padding: 8px 16px 4px 56px; margin: 0px 0px 24px; line-height: 22px; color: rgb(0, 0, 0); word-break: break-all; word-wrap: break-word; background-color: rgb(246, 248, 250); border: none; border-radius: 4px; position: relative; overflow-y: hidden; overflow-x: auto; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div style="box-sizing: border-box; font-family: Consolas, Inconsolata, Courier, monospace; font-size: 14px; padding: 0px; color: rgb(0, 0, 0); white-space: pre; background-color: rgb(246, 248, 250); border-radius: 4px; line-height: 22px; overflow-x: auto; word-wrap: normal;"><div><span style="box-sizing: border-box; color: rgb(155, 133, 157);">@Target</span>(ElementType.FIELD)</div><div><span style="box-sizing: border-box; color: rgb(155, 133, 157);">@Retention</span>(RetentionPolicy.RUNTIME)</div><div><span style="box-sizing: border-box; color: rgb(0, 0, 136);">public</span> @<span style="box-sizing: border-box; color: rgb(0, 0, 136);">interface</span> <span style="box-sizing: border-box; color: rgb(79, 79, 79);">Constraints</span> <span style="box-sizing: border-box;">{</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 136);">boolean</span> primaryKey() <span style="box-sizing: border-box; color: rgb(0, 0, 136);">default</span> <span style="box-sizing: border-box; color: rgb(0, 0, 136);">false</span>;</div><div><span style="box-sizing: border-box; color: rgb(0, 0, 136);">boolean</span> allowNull() <span style="box-sizing: border-box; color: rgb(0, 0, 136);">default</span> <span style="box-sizing: border-box; color: rgb(0, 0, 136);">true</span>;</div><div><span style="box-sizing: border-box; color: rgb(0, 0, 136);">boolean</span> unique() <span style="box-sizing: border-box; color: rgb(0, 0, 136);">default</span> <span style="box-sizing: border-box; color: rgb(0, 0, 136);">false</span>;</div><div>}</div></div></div><div style="box-sizing: border-box; margin: 0px 0px 16px; padding: 0px; font-size: 16px; color: rgb(79, 79, 79); line-height: 26px; text-align: justify; font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; font-size: 16px; color: rgb(79, 79, 79); line-height: 26px; font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">除了@符号以外，注解类的定义很像一个空的接口。定义注解时，会需要一些</span><span style="box-sizing: border-box; font-size: 16px; color: rgb(79, 79, 79); line-height: 26px; font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); font-style: italic;">元注解</span><span style="box-sizing: border-box; font-size: 16px; color: rgb(79, 79, 79); line-height: 26px; font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">，如@Target和@Retention，java提供了四种元注解，定义如下：</span></div><div style="box-sizing: border-box; margin: 0px 0px 16px; padding: 0px; font-size: 16px; color: rgb(79, 79, 79); line-height: 26px; text-align: justify; font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><div><span style="font-weight: bold; box-sizing: border-box;">@Target：表示该注解可以用于什么地方。</span> </div><div>取值（ElementType）包括： </div><div>CONSTRUCTOR:用于描述构造器 </div><div>FIELD:用于描述域 </div><div>LOCAL_VARIABLE:用于描述局部变量 </div><div>METHOD:用于描述方法 </div><div>PACKAGE:用于描述包 </div><div>PARAMETER:用于描述参数 </div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph:true;">TYPE:用于描述类、接口(包括注解类型) 或enum声明</span></div></div><div style="box-sizing: border-box; margin: 0px 0px 16px; padding: 0px; font-size: 16px; color: rgb(79, 79, 79); line-height: 26px; text-align: justify; font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><div><span style="font-weight: bold; box-sizing: border-box;">@Retention：表示需要在什么级别保存该注解信息。</span> </div><div>取值（RetentionPolicy）包括： </div><div>SOURCE:在源文件中有效（即源文件保留） </div><div>CLASS:在class文件中有效（即class保留） </div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph:true;">RUNTIME:在运行时有效（即运行时保留），因此可以通过反射机制读取注解的信息。</span></div></div><div style="box-sizing: border-box; margin: 0px 0px 16px; padding: 0px; font-size: 16px; color: rgb(79, 79, 79); line-height: 26px; text-align: justify; font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; font-size: 16px; color: rgb(79, 79, 79); line-height: 26px; font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); font-weight: bold;">@Documented:表示将此注解包含在javadoc中。</span></div><div style="box-sizing: border-box; margin: 0px 0px 16px; padding: 0px; font-size: 16px; color: rgb(79, 79, 79); line-height: 26px; text-align: justify; font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; font-size: 16px; color: rgb(79, 79, 79); line-height: 26px; font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); font-weight: bold;">@Inherited：表示允许子类继承父类中的注解。</span></div><div style="box-sizing: border-box; margin: 0px 0px 16px; padding: 0px; font-size: 16px; color: rgb(79, 79, 79); line-height: 26px; text-align: justify; font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><div>可以看出 定义注解格式为： </div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph:true;">　　public @interface 注解名 {定义体}</span></div></div><div style="box-sizing: border-box; margin: 0px 0px 16px; padding: 0px; font-size: 16px; color: rgb(79, 79, 79); line-height: 26px; text-align: justify; font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; font-size: 16px; color: rgb(79, 79, 79); line-height: 26px; font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">注解类中定义的元素称为</span><span style="box-sizing: border-box; font-size: 16px; color: rgb(79, 79, 79); line-height: 26px; font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); font-style: italic;">注解元素</span><span style="box-sizing: border-box; font-size: 16px; color: rgb(79, 79, 79); line-height: 26px; font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">，注解元素可用的类型如下：</span></div><div style="box-sizing: border-box; font-family: Consolas, Inconsolata, Courier, monospace; font-size: 14px; white-space: pre-wrap; padding: 8px 16px 4px 56px; margin: 0px 0px 24px; line-height: 22px; color: rgb(0, 0, 0); word-break: break-all; word-wrap: break-word; background-color: rgb(246, 248, 250); border: none; border-radius: 4px; position: relative; overflow-y: hidden; overflow-x: auto; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div><span style="box-sizing: border-box; font-family: Consolas, Inconsolata, Courier, monospace; font-size: 14px; color: rgb(0, 0, 0); white-space: pre; background-color: rgb(246, 248, 250); border-radius: 4px; line-height: 22px; overflow-x: auto; word-wrap: normal;">所有基本数据类型（int,float,boolean,byte,double,char,long,short)</span></div><div><span style="box-sizing: border-box; font-family: Consolas, Inconsolata, Courier, monospace; font-size: 14px; color: rgb(0, 0, 0); white-space: pre; background-color: rgb(246, 248, 250); border-radius: 4px; line-height: 22px; overflow-x: auto; word-wrap: normal;">String类型</span></div><div><span style="box-sizing: border-box; font-family: Consolas, Inconsolata, Courier, monospace; font-size: 14px; color: rgb(0, 0, 0); white-space: pre; background-color: rgb(246, 248, 250); border-radius: 4px; line-height: 22px; overflow-x: auto; word-wrap: normal;">Class类型</span></div><div><span style="box-sizing: border-box; font-family: Consolas, Inconsolata, Courier, monospace; font-size: 14px; color: rgb(0, 0, 0); white-space: pre; background-color: rgb(246, 248, 250); border-radius: 4px; line-height: 22px; overflow-x: auto; word-wrap: normal;">enum类型</span></div><div><span style="box-sizing: border-box; font-family: Consolas, Inconsolata, Courier, monospace; font-size: 14px; color: rgb(0, 0, 0); white-space: pre; background-color: rgb(246, 248, 250); border-radius: 4px; line-height: 22px; overflow-x: auto; word-wrap: normal;">Annotation类型</span></div><div><span style="box-sizing: border-box; font-family: Consolas, Inconsolata, Courier, monospace; font-size: 14px; color: rgb(0, 0, 0); white-space: pre; background-color: rgb(246, 248, 250); border-radius: 4px; line-height: 22px; overflow-x: auto; word-wrap: normal;">以上所有类型的数组</span></div></div><div style="box-sizing: border-box; margin: 0px 0px 16px; padding: 0px; font-size: 16px; color: rgb(79, 79, 79); line-height: 26px; text-align: justify; font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; font-size: 16px; color: rgb(79, 79, 79); line-height: 26px; font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">如果你使用了其它类型，那编译器就会报错。注意，也不允许使用任何包装类型，但由于自动打包的存在，这算不上什么限制。注解也可以作为元素的类型，比如我们再定义一个注解类：</span></div><div style="box-sizing: border-box; font-family: Consolas, Inconsolata, Courier, monospace; font-size: 14px; white-space: pre-wrap; padding: 8px 16px 4px 56px; margin: 0px 0px 24px; line-height: 22px; color: rgb(0, 0, 0); word-break: break-all; word-wrap: break-word; background-color: rgb(246, 248, 250); border: none; border-radius: 4px; position: relative; overflow-y: hidden; overflow-x: auto; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div style="box-sizing: border-box; font-family: Consolas, Inconsolata, Courier, monospace; font-size: 14px; padding: 0px; color: rgb(0, 0, 0); white-space: pre; background-color: rgb(246, 248, 250); border-radius: 4px; line-height: 22px; overflow-x: auto; word-wrap: normal;"><div><span style="box-sizing: border-box; color: rgb(155, 133, 157);">@Target</span>(ElementType.FIELD)</div><div><span style="box-sizing: border-box; color: rgb(155, 133, 157);">@Retention</span>(RetentionPolicy.RUNTIME)</div><div><span style="box-sizing: border-box; color: rgb(0, 0, 136);">public</span> @<span style="box-sizing: border-box; color: rgb(0, 0, 136);">interface</span> <span style="box-sizing: border-box; color: rgb(79, 79, 79);">SQLString</span> <span style="box-sizing: border-box;">{</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 136);">int</span> value() <span style="box-sizing: border-box; color: rgb(0, 0, 136);">default</span> <span style="box-sizing: border-box; color: rgb(0, 102, 102);">0</span>;</div><div>String name() <span style="box-sizing: border-box; color: rgb(0, 0, 136);">default</span> <span style="box-sizing: border-box; color: rgb(0, 153, 0);">&quot;&quot;</span>;</div><div>Constraints constraints() <span style="box-sizing: border-box; color: rgb(0, 0, 136);">default</span> <span style="box-sizing: border-box; color: rgb(155, 133, 157);">@Constraints</span>;</div><div><span style="box-sizing: border-box; color: rgb(136, 0, 0);">//@Constraints后没有括号表明使用默认值，可以加括号，在里面定义初始值，比如@Constraints（unique=true）</span></div><div>}</div></div></div><div style="box-sizing: border-box; margin: 0px 0px 16px; padding: 0px; font-size: 16px; color: rgb(79, 79, 79); line-height: 26px; text-align: justify; font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; font-size: 16px; color: rgb(79, 79, 79); line-height: 26px; font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">可以看出，所有的注解元素都有一个默认值。编译器对元素的默认值有些过分挑剔，首先，元素必须具有默认值；其次不能以null作为默认值。所以我们只能自己定义一些特殊的值，例如空字符串或负数，来表示某个元素不存在。</span></div><h2 style="box-sizing: border-box; font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun; font-weight: bold; line-height: 32px; color: rgb(79, 79, 79); margin: 8px 0px 16px; font-size: 24px; padding: 0px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun; font-weight: bold; line-height: 32px; color: rgb(79, 79, 79); font-size: 24px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">注解类的使用</span></h2><div style="box-sizing: border-box; margin: 0px 0px 16px; padding: 0px; font-size: 16px; color: rgb(79, 79, 79); line-height: 26px; text-align: justify; font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><div>注解类定义好了，怎么使用呢？ </div><div>为了体现注解的便利和强大，在这里我们写一个demo，使用注解来自动生成一个建数据库表的SQL命令。 </div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph:true;">另外我们再提供两个注解类：</span></div></div><div style="box-sizing: border-box; font-family: Consolas, Inconsolata, Courier, monospace; font-size: 14px; white-space: pre-wrap; padding: 8px 16px 4px 56px; margin: 0px 0px 24px; line-height: 22px; color: rgb(0, 0, 0); word-break: break-all; word-wrap: break-word; background-color: rgb(246, 248, 250); border: none; border-radius: 4px; position: relative; overflow-y: hidden; overflow-x: auto; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div style="box-sizing: border-box; font-family: Consolas, Inconsolata, Courier, monospace; font-size: 14px; padding: 0px; color: rgb(0, 0, 0); white-space: pre; background-color: rgb(246, 248, 250); border-radius: 4px; line-height: 22px; overflow-x: auto; word-wrap: normal;"><div><span style="box-sizing: border-box; color: rgb(155, 133, 157);">@Target</span>(ElementType.TYPE)</div><div><span style="box-sizing: border-box; color: rgb(155, 133, 157);">@Retention</span>(RetentionPolicy.RUNTIME)</div><div><span style="box-sizing: border-box; color: rgb(0, 0, 136);">public</span> @<span style="box-sizing: border-box; color: rgb(0, 0, 136);">interface</span> <span style="box-sizing: border-box; color: rgb(79, 79, 79);">DBTable</span> <span style="box-sizing: border-box;">{</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 136);">public</span> String <span style="box-sizing: border-box; color: rgb(0, 153, 0);">name</span>() <span style="box-sizing: border-box; color: rgb(0, 0, 136);">default</span> &quot;&quot;;</div><div>}</div></div></div><div style="box-sizing: border-box; font-family: Consolas, Inconsolata, Courier, monospace; font-size: 14px; white-space: pre-wrap; padding: 8px 16px 4px 56px; margin: 0px 0px 24px; line-height: 22px; color: rgb(0, 0, 0); word-break: break-all; word-wrap: break-word; background-color: rgb(246, 248, 250); border: none; border-radius: 4px; position: relative; overflow-y: hidden; overflow-x: auto; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div style="box-sizing: border-box; font-family: Consolas, Inconsolata, Courier, monospace; font-size: 14px; padding: 0px; color: rgb(0, 0, 0); white-space: pre; background-color: rgb(246, 248, 250); border-radius: 4px; line-height: 22px; overflow-x: auto; word-wrap: normal;"><div><span style="box-sizing: border-box; color: rgb(155, 133, 157);">@Target</span>(ElementType.FIELD)</div><div><span style="box-sizing: border-box; color: rgb(155, 133, 157);">@Retention</span>(RetentionPolicy.RUNTIME)</div><div><span style="box-sizing: border-box; color: rgb(0, 0, 136);">public</span> @<span style="box-sizing: border-box; color: rgb(0, 0, 136);">interface</span> <span style="box-sizing: border-box; color: rgb(79, 79, 79);">SQLInteger</span> <span style="box-sizing: border-box;">{</span></div><div>String name() <span style="box-sizing: border-box; color: rgb(0, 0, 136);">default</span> <span style="box-sizing: border-box; color: rgb(0, 153, 0);">&quot;&quot;</span>;</div><div>Constraints constraints() <span style="box-sizing: border-box; color: rgb(0, 0, 136);">default</span> <span style="box-sizing: border-box; color: rgb(155, 133, 157);">@Constraints</span>;</div><div>}</div></div></div><div style="box-sizing: border-box; margin: 0px 0px 16px; padding: 0px; font-size: 16px; color: rgb(79, 79, 79); line-height: 26px; text-align: justify; font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><div>好，现在我们一共有4个注解类。 </div><div>@DBTable 代表数据库表，注解元素name表示表名； </div><div>@Constraints 代表对数据表每一列的条件补充，有primaryKey是不是主键，默认false，allowNull是否允许为空，默认true，unique数据是否唯一，默认false； </div><div>@SQLString 代表表中的String列，注解元素value表示列长度，name表示列名，constraints表示对列的一些约束条件； </div><div>@SQLInteger 代表表中的int列，name表示列名，constraints表示对列的一些约束条件； </div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph:true;">下面我们定义一个简单的Bean类，在其中应用以上4个注解类：</span></div></div><div style="box-sizing: border-box; font-family: Consolas, Inconsolata, Courier, monospace; font-size: 14px; white-space: pre-wrap; padding: 8px 16px 4px 56px; margin: 0px 0px 24px; line-height: 22px; color: rgb(0, 0, 0); word-break: break-all; word-wrap: break-word; background-color: rgb(246, 248, 250); border: none; border-radius: 4px; position: relative; overflow-y: hidden; overflow-x: auto; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div style="box-sizing: border-box; font-family: Consolas, Inconsolata, Courier, monospace; font-size: 14px; padding: 0px; color: rgb(0, 0, 0); white-space: pre; background-color: rgb(246, 248, 250); border-radius: 4px; line-height: 22px; overflow-x: auto; word-wrap: normal;"><div><span style="box-sizing: border-box; color: rgb(155, 133, 157);">@DBTable</span>(name = <span style="box-sizing: border-box; color: rgb(0, 153, 0);">&quot;MEMBER&quot;</span>)</div><div><span style="box-sizing: border-box; color: rgb(0, 0, 136);">public</span> <span style="box-sizing: border-box; color: rgb(0, 0, 136);">class</span> <span style="box-sizing: border-box; color: rgb(79, 79, 79);">Member</span> <span style="box-sizing: border-box;">{</span></div><div><span style="box-sizing: border-box; color: rgb(155, 133, 157);">@SQLString</span>(<span style="box-sizing: border-box; color: rgb(0, 102, 102);">30</span>) String firstName;</div><div><span style="box-sizing: border-box; color: rgb(155, 133, 157);">@SQLString</span>(<span style="box-sizing: border-box; color: rgb(0, 102, 102);">50</span>) String lastName;</div><div><span style="box-sizing: border-box; color: rgb(155, 133, 157);">@SQLInteger</span> <span style="box-sizing: border-box; color: rgb(0, 0, 136);">int</span> age;</div><div><span style="box-sizing: border-box; color: rgb(155, 133, 157);">@SQLString</span>(value = <span style="box-sizing: border-box; color: rgb(0, 102, 102);">30</span>, constraints = <span style="box-sizing: border-box; color: rgb(155, 133, 157);">@Constraints</span>(primaryKey = <span style="box-sizing: border-box; color: rgb(0, 0, 136);">true</span>)) String handle;</div><div><span style="box-sizing: border-box; color: rgb(0, 0, 136);">public</span> String <span style="box-sizing: border-box; color: rgb(0, 153, 0);">getFirstName</span>() {</div><div><span style="box-sizing: border-box; color: rgb(0, 0, 136);">return</span> firstName;</div><div>}</div><div><span style="box-sizing: border-box; color: rgb(0, 0, 136);">public</span> String <span style="box-sizing: border-box; color: rgb(0, 153, 0);">getLastName</span>() {</div><div><span style="box-sizing: border-box; color: rgb(0, 0, 136);">return</span> lastName;</div><div>}</div><div><span style="box-sizing: border-box; color: rgb(0, 0, 136);">public</span> <span style="box-sizing: border-box; color: rgb(0, 0, 136);">int</span> <span style="box-sizing: border-box; color: rgb(0, 153, 0);">getAge</span>() {</div><div><span style="box-sizing: border-box; color: rgb(0, 0, 136);">return</span> age;</div><div>}</div><div><span style="box-sizing: border-box; color: rgb(0, 0, 136);">public</span> String <span style="box-sizing: border-box; color: rgb(0, 153, 0);">getHandle</span>() {</div><div><span style="box-sizing: border-box; color: rgb(0, 0, 136);">return</span> handle;</div><div>}</div><div><span style="box-sizing: border-box; color: rgb(0, 0, 136);">public</span> String <span style="box-sizing: border-box; color: rgb(0, 153, 0);">toString</span>() {</div><div><span style="box-sizing: border-box; color: rgb(0, 0, 136);">return</span> handle;</div><div>}</div><div>}</div></div></div><div style="box-sizing: border-box; margin: 0px 0px 16px; padding: 0px; font-size: 16px; color: rgb(79, 79, 79); line-height: 26px; text-align: justify; font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; font-size: 16px; color: rgb(79, 79, 79); line-height: 26px; font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">注解的元素在使用时表现为名-值对的形式，并需要置于 @注解类名 声明之后的括号内。如果没有使用括号，代表全部使用默认值。</span></div><div style="box-sizing: border-box; margin: 0px 0px 16px; padding: 0px; font-size: 16px; color: rgb(79, 79, 79); line-height: 26px; text-align: justify; font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><div>1、类的注解@DBTable给定了值MEMBER，它将会用来作为表的名字； </div><div>2、Bean的属性firstName和lastName，都被注解为@SQLString类型，这些注解有两个有趣的地方：第一，他们都使用了嵌入的@Constraints注解的默认值；第二，它们都使用了快捷方式。何谓快捷方式？如果程序员的注解中定义了名为value的元素，并且在应用该注解的时候，如果该元素是唯一需要赋值的一个元素，那么此时无需使用名-值对的这种语法，而只需在括号内给出value元素所需的值即可。这可以应用于任何合法类型的元素。当然了，这也限制了程序员必须将此元素命名为value。 </div><div>Bean属性age全部使用默认值，handle为主键。 </div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph:true;">3、Bean属性age全部使用默认值，handle为主键。</span></div></div><h2 style="box-sizing: border-box; font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun; font-weight: bold; line-height: 32px; color: rgb(79, 79, 79); margin: 8px 0px 16px; font-size: 24px; padding: 0px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun; font-weight: bold; line-height: 32px; color: rgb(79, 79, 79); font-size: 24px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">实现注解处理器</span></h2><div style="box-sizing: border-box; margin: 0px 0px 16px; padding: 0px; font-size: 16px; color: rgb(79, 79, 79); line-height: 26px; text-align: justify; font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><div>注解类使用上了，我们还需要一个注解处理器来解析我们定义的Bean，这样才能将注解转换成我们需要的操作。 </div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph:true;">以下定义解析Bean的注解处理器，我们的目的是要输出一条SQL语句。主要用到了反射技术。</span></div></div><div style="box-sizing: border-box; font-family: Consolas, Inconsolata, Courier, monospace; font-size: 14px; white-space: pre-wrap; padding: 8px 16px 4px 56px; margin: 0px 0px 24px; line-height: 22px; color: rgb(0, 0, 0); word-break: break-all; word-wrap: break-word; background-color: rgb(246, 248, 250); border: none; border-radius: 4px; position: relative; overflow-y: hidden; overflow-x: auto; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div style="box-sizing: border-box; font-family: Consolas, Inconsolata, Courier, monospace; font-size: 14px; padding: 0px; color: rgb(0, 0, 0); white-space: pre; background-color: rgb(246, 248, 250); border-radius: 4px; line-height: 22px; overflow-x: auto; word-wrap: normal;"><div><span style="box-sizing: border-box; color: rgb(0, 0, 136);">public</span> <span style="box-sizing: border-box; color: rgb(0, 0, 136);">class</span> TableCreator {</div><div><span style="box-sizing: border-box; color: rgb(0, 0, 136);">public</span> <span style="box-sizing: border-box; color: rgb(0, 0, 136);">static</span> <span style="box-sizing: border-box; color: rgb(0, 0, 136);">void</span> <span style="box-sizing: border-box; color: rgb(0, 153, 0);">main</span>(String[] args) throws Exception{</div><div><span style="box-sizing: border-box; color: rgb(136, 0, 0);">//传入我们定义好的Bean类名，带上包名</span></div><div>Class&lt;?&gt; cl = Class.forName(<span style="box-sizing: border-box; color: rgb(0, 153, 0);">&quot;annotation.Member&quot;</span>);</div><div><span style="box-sizing: border-box; color: rgb(136, 0, 0);">//检查我们传入的类是否带有@DBTable注解</span></div><div>DBTable dbTable = cl.getAnnotation(DBTable.class);</div><div>List&lt;String&gt; columnDefs = <span style="box-sizing: border-box; color: rgb(0, 0, 136);">new</span> ArrayList&lt;String&gt;();</div><div><span style="box-sizing: border-box; color: rgb(136, 0, 0);">//得到类中的所有定义的属性</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 136);">for</span>(Field filed : cl.getDeclaredFields()){</div><div>String columnName = <span style="box-sizing: border-box; color: rgb(0, 0, 136);">null</span>;</div><div><span style="box-sizing: border-box; color: rgb(136, 0, 0);">//得到属性的注解，对一个目标可以使用多个注解</span></div><div>Annotation[] anns = filed.getAnnotations();</div><div><span style="box-sizing: border-box; color: rgb(0, 0, 136);">if</span>(anns.length &lt; <span style="box-sizing: border-box; color: rgb(0, 102, 102);">1</span>){</div><div><span style="box-sizing: border-box; color: rgb(0, 0, 136);">continue</span>;</div><div>}</div><div><span style="box-sizing: border-box; color: rgb(136, 0, 0);">//SQLString注解走着</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 136);">if</span>(anns[<span style="box-sizing: border-box; color: rgb(0, 102, 102);">0</span>] instanceof SQLString){</div><div>SQLString sString = (SQLString)anns[<span style="box-sizing: border-box; color: rgb(0, 102, 102);">0</span>];</div><div><span style="box-sizing: border-box; color: rgb(136, 0, 0);">//name()使用的是默认值，所以这里取属性名</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 136);">if</span>(sString.name().length() &lt; <span style="box-sizing: border-box; color: rgb(0, 102, 102);">1</span>){</div><div>columnName = filed.getName().toUpperCase();</div><div>}<span style="box-sizing: border-box; color: rgb(0, 0, 136);">else</span>{</div><div>columnName = sString.name();</div><div>}</div><div><span style="box-sizing: border-box; color: rgb(136, 0, 0);">//构建SQL语句</span></div><div>columnDefs.add(columnName + <span style="box-sizing: border-box; color: rgb(0, 153, 0);">&quot; VARCHAR(&quot;</span> + sString.<span style="box-sizing: border-box; color: rgb(0, 0, 136);">value</span>() + <span style="box-sizing: border-box; color: rgb(0, 153, 0);">&quot;)&quot;</span> + getConstraints(sString.constraints()));</div><div>}</div><div><span style="box-sizing: border-box; color: rgb(136, 0, 0);">//SQLInteger注解走着</span></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 136);">if</span>(anns[<span style="box-sizing: border-box; color: rgb(0, 102, 102);">0</span>] instanceof SQLInteger){</div><div>SQLInteger sInt = (SQLInteger)anns[<span style="box-sizing: border-box; color: rgb(0, 102, 102);">0</span>];</div><div><span style="box-sizing: border-box; color: rgb(0, 0, 136);">if</span>(sInt.name().length() &lt; <span style="box-sizing: border-box; color: rgb(0, 102, 102);">1</span>){</div><div>columnName = filed.getName().toUpperCase();</div><div>}<span style="box-sizing: border-box; color: rgb(0, 0, 136);">else</span>{</div><div>columnName = sInt.name();</div><div>}</div><div>columnDefs.add(columnName + <span style="box-sizing: border-box; color: rgb(0, 153, 0);">&quot; INT&quot;</span> + getConstraints(sInt.constraints()));</div><div>}</div><div>}</div><div>StringBuilder creator = <span style="box-sizing: border-box; color: rgb(0, 0, 136);">new</span> StringBuilder(<span style="box-sizing: border-box; color: rgb(0, 153, 0);">&quot;CREATE TABLE &quot;</span> + dbTable.name() + <span style="box-sizing: border-box; color: rgb(0, 153, 0);">&quot;( &quot;</span>);</div><div><span style="box-sizing: border-box; color: rgb(0, 0, 136);">for</span>(String c : columnDefs){</div><div>creator.append(<span style="box-sizing: border-box; color: rgb(0, 153, 0);">&quot;\n&quot;</span> + c + <span style="box-sizing: border-box; color: rgb(0, 153, 0);">&quot;,&quot;</span>);</div><div>}</div><div>creator.deleteCharAt(creator.length()-<span style="box-sizing: border-box; color: rgb(0, 102, 102);">1</span>);</div><div>creator.append(<span style="box-sizing: border-box; color: rgb(0, 153, 0);">&quot;)&quot;</span>);</div><div>System.<span style="box-sizing: border-box; color: rgb(0, 0, 136);">out</span>.println(creator.toString());</div><div>}</div><div><br/></div><div><span style="box-sizing: border-box; color: rgb(0, 0, 136);">private</span> <span style="box-sizing: border-box; color: rgb(0, 0, 136);">static</span> String <span style="box-sizing: border-box; color: rgb(0, 153, 0);">getConstraints</span>(Constraints con) {</div><div>String constraints = <span style="box-sizing: border-box; color: rgb(0, 153, 0);">&quot;&quot;</span>;</div><div><span style="box-sizing: border-box; color: rgb(0, 0, 136);">if</span>(!con.allowNull()){</div><div>constraints += <span style="box-sizing: border-box; color: rgb(0, 153, 0);">&quot; NOT NULL&quot;</span>;</div><div>}</div><div><span style="box-sizing: border-box; color: rgb(0, 0, 136);">if</span>(con.primaryKey()){</div><div>constraints += <span style="box-sizing: border-box; color: rgb(0, 153, 0);">&quot; PRIMARY KEY&quot;</span>;</div><div>}</div><div><span style="box-sizing: border-box; color: rgb(0, 0, 136);">if</span>(con.unique()){</div><div>constraints += <span style="box-sizing: border-box; color: rgb(0, 153, 0);">&quot; UNIQUE&quot;</span>;</div><div>}</div><div><span style="box-sizing: border-box; color: rgb(0, 0, 136);">return</span> constraints;</div><div>}</div><div>}</div></div></div><div style="box-sizing: border-box; margin: 0px 0px 16px; padding: 0px; font-size: 16px; color: rgb(79, 79, 79); line-height: 26px; text-align: justify; font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><div>最后的输出： </div><div>CREATE TABLE MEMBER( </div><div>FIRSTNAME VARCHAR(30), </div><div>LASTNAME VARCHAR(50), </div><div>AGE INT, </div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph:true;">HANDLE VARCHAR(30) PRIMARY KEY)</span></div></div><div><span style="box-sizing: border-box; font-size: 16px; color: rgb(79, 79, 79); line-height: 26px; font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;">———————————————————-end————————————————————</span></div></div></span>
</div></body></html> 