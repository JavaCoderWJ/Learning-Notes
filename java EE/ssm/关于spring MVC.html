<html>
<head>
  <title>Evernote Export</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/306387 (zh-CN, DDL); Windows/10.0.0 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="789"/>

<div>
<span><div><font style="font-size: 36pt;"><span style="font-size: 36pt; font-weight: bold;">关于spring MVC</span></font></div><div><br/></div><div><span style="font-size: 18.6667px;"><b>博客推荐： <a href="http://www.cnblogs.com/liukemng/tag/SpringMVC/" style="font-size: 10.5pt; mso-bidi-font-size: 11.0pt; font-family: &quot;Calibri&quot;,sans-serif; mso-ascii-theme-font: minor-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: minor-fareast; mso-hansi-theme-font: minor-latin; mso-bidi-font-family: &quot;Times New Roman&quot;; mso-bidi-theme-font: minor-bidi; mso-ansi-language: EN-US; mso-fareast-language: ZH-CN; mso-bidi-language: AR-SA; font-weight: bold;">http://www.cnblogs.com/liukemng/tag/SpringMVC/</a></b></span></div><div><span style="font-size: 18.6667px;"><span style="font-size: 18.6667px; font-weight: bold;">什么是spring mvc?</span></span></div><div><br style="font-weight: bold;"/></div><div><span style="font-weight: bold;">　　<span style="font-weight: bold; color: rgb(227, 0, 0);">springMVC是spring框架的一个模块，springMVC和spring无需通过中间整合层进行开发。</span></span><span style="font-weight: bold; color: rgb(227, 0, 0);">springMVC是一个基于mvc的web框架。</span></div><div><div><br/></div><table style="border-collapse: collapse; min-width: 100%;"><colgroup><col style="width: 817px;"></col></colgroup><tbody><tr><td style="border: 1px solid rgb(204, 204, 204); width: 817px; padding: 8px;"><div><span style="font-weight: bold;">1.用户发起request请求至控制器(Controller)</span></div><div><br style="font-weight: bold;"/></div><div><span style="font-weight: bold;">　　控制接收用户请求的数据，委托给模型进行处理</span></div><div><br style="font-weight: bold;"/></div><div><span style="font-weight: bold;">2.控制器通过模型(Model)处理数据并得到处理结果</span></div><div><br style="font-weight: bold;"/></div><div><span style="font-weight: bold;">　　模型通常是指业务逻辑</span></div><div><br style="font-weight: bold;"/></div><div><span style="font-weight: bold;">3.模型处理结果返回给控制器</span></div><div><br style="font-weight: bold;"/></div><div><span style="font-weight: bold;">4.控制器将模型数据在视图(View)中展示</span></div><div><br style="font-weight: bold;"/></div><div><span style="font-weight: bold;">　　web中模型无法将数据直接在视图上显示，需要通过控制器完成。如果在C/S应用中模型是可以将数据在视图中展示的。</span></div><div><br style="font-weight: bold;"/></div><div><span style="font-weight: bold;">5.控制器将视图response响应给用户</span></div><div><br style="font-weight: bold;"/></div><div><span style="font-weight: bold;">      通过视图展示给用户要的数据或处理结果。</span></div></td></tr></tbody></table><div><br/></div></div><div><br style="font-weight: bold;"/></div><div><span style="font-weight: bold; font-size: 14pt;">*:SpringMVC框架介绍</span></div><div><br style="font-weight: bold;"/></div><div><span style="font-weight: bold;">(1).发起请求到前端控制器(DispatcherServlet);</span></div><div><br style="font-weight: bold;"/></div><div><span style="font-weight: bold;">(2).前端控制器请求HandlerMapping查找Handler，可以根据xml配置、注解进行查找；</span></div><div><br style="font-weight: bold;"/></div><div><span style="font-weight: bold;">(3).处理器映射器HandlerMapping向前端控制器返回Handler；</span></div><div><br style="font-weight: bold;"/></div><div><span style="font-weight: bold;">(4).前端控制器调用处理器适配器去执行Handler；</span></div><div><br style="font-weight: bold;"/></div><div><span style="font-weight: bold;">(5).处理器适配器去执行Handler；</span></div><div><br style="font-weight: bold;"/></div><div><span style="font-weight: bold;">(6).Handler执行完成给适配器返回ModelAndView；</span></div><div><br style="font-weight: bold;"/></div><div><span style="font-weight: bold;">(7).处理器适配器向前端控制器返回ModelAndView(是springmvc框架的一个底层对象，包括Model和View)；</span></div><div><br style="font-weight: bold;"/></div><div><span style="font-weight: bold;">(8).前端控制器请求视图解析器去进行视图解析，根据逻辑视图名称解析真正的视图(jsp...)；</span></div><div><br style="font-weight: bold;"/></div><div><span style="font-weight: bold;">(9).视图解析器向前端控制器返回View;</span></div><div><br style="font-weight: bold;"/></div><div><span style="font-weight: bold;">(10).前端控制器进行视图渲染，视图渲染就是将模型数据(在ModelAndView对象中)填充到request域中。</span></div><div><br style="font-weight: bold;"/></div><div><span style="font-weight: bold;">(11).前端控制器向用户响应结果。</span></div><div><hr/></div><div><br style="font-weight: bold;"/></div><div><span style="font-weight: bold;">组件：</span></div><div><br style="font-weight: bold;"/></div><div><span style="font-weight: bold;">1、前端控制器DispatcherServlet（不需要攻城狮开发）,由框架提供</span></div><div><br style="font-weight: bold;"/></div><div><span style="font-weight: bold;">　　作用：接收请求，响应结果，相当于转发器，中央处理器。有了dispatcherServlet减少了其它组件之间的耦合度。</span></div><div><br style="font-weight: bold;"/></div><div><span style="font-weight: bold;">       用户请求到达前端控制器，它就相当于mvc模式中的c，dispatcherServlet是整个流程控制的中心，由它调用其它组件处理用户的请求，dispatcherServlet的存在降低了组件之间的耦合性。</span></div><div><br style="font-weight: bold;"/></div><div><span style="font-weight: bold;">2、处理器映射器HandlerMapping(不需要攻城狮开发),由框架提供</span></div><div><br style="font-weight: bold;"/></div><div><span style="font-weight: bold;">　　作用：根据请求的url查找Handler</span></div><div><br style="font-weight: bold;"/></div><div><span style="font-weight: bold;">       HandlerMapping负责根据用户请求找到Handler即处理器，springmvc提供了不同的映射器实现不同的映射方式，例如：配置文件方式，实现接口方式，注解方式等。</span></div><div><br style="font-weight: bold;"/></div><div><span style="font-weight: bold;">3、处理器适配器HandlerAdapter</span></div><div><br style="font-weight: bold;"/></div><div><span style="font-weight: bold;">　　作用：按照特定规则（HandlerAdapter要求的规则）去执行Handler</span></div><div><br style="font-weight: bold;"/></div><div><span style="font-weight: bold;">       通过HandlerAdapter对处理器进行执行，这是适配器模式的应用，通过扩展适配器可以对更多类型的处理器进行执行。</span></div><div><br style="font-weight: bold;"/></div><div><span style="font-weight: bold;">4、处理器Handler(需要攻城狮开发)</span></div><div><br style="font-weight: bold;"/></div><div><br style="font-weight: bold;"/></div><div><span style="font-weight: bold;">　　注意：编写Handler时按照HandlerAdapter的要求去做，这样适配器才可以去正确执行Handler</span></div><div><br style="font-weight: bold;"/></div><div><span style="font-weight: bold;">     Handler 是继DispatcherServlet前端控制器的后端控制器，在DispatcherServlet的控制下Handler对具体的用户请求进行处理。</span></div><div><br style="font-weight: bold;"/></div><div><span style="font-weight: bold;">     由于Handler涉及到具体的用户业务请求，所以一般情况需要攻城狮根据业务需求开发Handler。</span></div><div><br style="font-weight: bold;"/></div><div><span style="font-weight: bold;">5、视图解析器View resolver(不需要攻城狮开发),由框架提供</span></div><div><br style="font-weight: bold;"/></div><div><span style="font-weight: bold;">　　作用：进行视图解析，根据逻辑视图名解析成真正的视图（view）</span></div><div><br style="font-weight: bold;"/></div><div><span style="font-weight: bold;">　　View Resolver负责将处理结果生成View视图，View Resolver首先根据逻辑视图名解析成物理视图名即具体的页面地址，再生成View视图对象，最后对View进行渲染将处理结果通过页面展示给用户。 springmvc框架提供了很多的View视图类型，包括：jstlView、freemarkerView、pdfView等。</span></div><div><br style="font-weight: bold;"/></div><div><span style="font-weight: bold;">　　一般情况下需要通过页面标签或页面模版技术将模型数据通过页面展示给用户，需要由攻城狮根据业务需求开发具体的页面。</span></div><div><br style="font-weight: bold;"/></div><div><span style="font-weight: bold;">6、视图View(需要攻城狮开发jsp...)</span></div><div><br style="font-weight: bold;"/></div><div><span style="font-weight: bold;">　　View是一个接口，实现类支持不同的View类型（jsp、freemarker、pdf...）</span></div><div><br style="font-weight: bold;"/></div><div><span style="font-weight: bold; font-size: 10pt;">------------------------------------------------------------------------------------------------------------------------------------------------</span></div><div><font style="font-size: 10pt;"><span style="font-size: 10pt; font-weight: bold;">一、SpringMVC基础入门，创建一个HelloWorld程序</span></font></div><div><br/></div><div>1.首先，导入SpringMVC需要的jar包。</div><div><img src="关于spring MVC_files/Image.png" type="image/png" data-filename="Image.png" width="458"/></div><div>2.添加Web.xml配置文件中关于SpringMVC的配置</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>&lt;!--configure the setting of springmvcDispatcherServlet and configure the mapping--&gt;</div><div>  &lt;servlet&gt;</div><div>      &lt;servlet-name&gt;springmvc&lt;/servlet-name&gt;</div><div>      &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;</div><div>      &lt;init-param&gt;</div><div>            &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;</div><div>            &lt;param-value&gt;classpath:springmvc-servlet.xml&lt;/param-value&gt;</div><div>        &lt;/init-param&gt;</div><div>        &lt;!-- &lt;load-on-startup&gt;1&lt;/load-on-startup&gt; --&gt;</div><div>  &lt;/servlet&gt;</div><div><br/></div><div>  &lt;servlet-mapping&gt;</div><div>      &lt;servlet-name&gt;springmvc&lt;/servlet-name&gt;</div><div>      &lt;url-pattern&gt;/&lt;/url-pattern&gt;</div><div>  &lt;/servlet-mapping&gt;</div></div><div><br/></div><div>3.在src下添加springmvc-servlet.xml配置文件</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</div><div>&lt;beans xmlns=&quot;<a href="http://www.springframework.org/schema/beans">http://www.springframework.org/schema/beans</a>&quot;</div><div>    xmlns:xsi=&quot;<a href="http://www.w3.org/2001/XMLSchema-instance">http://www.w3.org/2001/XMLSchema-instance</a>&quot;</div><div>    xmlns:context=&quot;<a href="http://www.springframework.org/schema/context">http://www.springframework.org/schema/context</a>&quot;</div><div>    xmlns:mvc=&quot;<a href="http://www.springframework.org/schema/mvc">http://www.springframework.org/schema/mvc</a>&quot;</div><div>    xsi:schemaLocation=&quot;<a href="http://www.springframework.org/schema/beanshttp://www.springframework.org/schema/beans/spring-beans.xsd">http://www.springframework.org/schema/beanshttp://www.springframework.org/schema/beans/spring-beans.xsd</a></div><div><a href="http://www.springframework.org/schema/contexthttp://www.springframework.org/schema/context/spring-context-4.1.xsd">http://www.springframework.org/schema/contexthttp://www.springframework.org/schema/context/spring-context-4.1.xsd</a></div><div><a href="http://www.springframework.org/schema/mvchttp://www.springframework.org/schema/mvc/spring-mvc-4.1.xsd">http://www.springframework.org/schema/mvchttp://www.springframework.org/schema/mvc/spring-mvc-4.1.xsd</a>&quot;&gt;                    </div><div><br/></div><div>    &lt;!-- scan the package and the sub package --&gt;</div><div>    &lt;context:component-scan base-package=&quot;test.SpringMVC&quot;/&gt;</div><div><br/></div><div>    &lt;!-- don't handle the static resource --&gt;</div><div>    &lt;mvc:default-servlet-handler /&gt;</div><div><br/></div><div>    &lt;!-- if you use annotation you must configure following setting --&gt;</div><div>    &lt;mvc:annotation-driven /&gt;</div><div><br/></div><div>    &lt;!-- configure the InternalResourceViewResolver --&gt;</div><div>    &lt;bean class=&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;</div><div>            id=&quot;internalResourceViewResolver&quot;&gt;</div><div>        &lt;!-- 前缀 --&gt;</div><div>        &lt;property name=&quot;prefix&quot; value=&quot;/WEB-INF/jsp/&quot; /&gt;</div><div>        &lt;!-- 后缀 --&gt;</div><div>        &lt;property name=&quot;suffix&quot; value=&quot;.jsp&quot; /&gt;</div><div>    &lt;/bean&gt;</div><div>&lt;/beans&gt;</div></div><div>4.在WEB-INF文件夹下创建名为jsp的文件夹，用来存放jsp视图。创建一个hello.jsp，在body中添加“Hello World”。</div><div><br/></div><div>5.建立包及Controller，如下所示</div><div><br/></div><div><img src="关于spring MVC_files/Image [1].png" type="image/png" data-filename="Image.png" width="374"/></div><div><br/></div><div>6.编写Controller代码</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>@Controller</div><div>@RequestMapping(&quot;/mvc&quot;)</div><div>public class mvcController {</div><div><br/></div><div>    @RequestMapping(&quot;/hello&quot;)</div><div>    public String hello(){        </div><div>        return &quot;hello&quot;;</div><div>    }</div><div>}</div></div><div><br/></div><div>7.启动服务器，键入 <a href="http://localhost:8080/">http://localhost:8080/</a>项目名/mvc/hello</div><div><br/></div><div><span style="font-size: 14pt; font-weight: bold;">二、配置解析</span></div><div><br/></div><div>1.Dispatcherservlet</div><div><br/></div><div>         DispatcherServlet是前置控制器，配置在web.xml文件中的。拦截匹配的请求，Servlet拦截匹配规则要自已定义，把拦截下来的请求，依据相应的规则分发到目标Controller来处理，是配置spring MVC的第一步。</div><div><br/></div><div>2.InternalResourceViewResolver</div><div><br/></div><div>        视图名称解析器</div><div><br/></div><div>3.以上出现的注解</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>@Controller 负责注册一个bean 到spring 上下文中</div><div>@RequestMapping 注解为控制器指定可以处理哪些 URL 请求.</div></div><div><br/></div><div><span style="font-size: 14pt; font-weight: bold;">三、SpringMVC常用注解</span></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>@Controller</div></div><div><br/></div><div>负责注册一个bean 到spring 上下文中。</div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>@RequestMapping</div></div><div><br/></div><div>注解为控制器指定可以处理哪些 URL 请求。</div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>@RequestBody</div></div><div><br/></div><div>该注解用于读取Request请求的body部分数据，使用系统默认配置的HttpMessageConverter进行解析，然后把相应的数据绑定到要返回的对象上 ，再把HttpMessageConverter返回的对象数据绑定到 controller中方法的参数上。</div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>@ResponseBody</div></div><div><br/></div><div>该注解用于将Controller的方法返回的对象，通过适当的HttpMessageConverter转换为指定格式后，写入到Response对象的body数据区。</div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>@ModelAttribute 　</div></div><div>在方法定义上使用 @ModelAttribute 注解：Spring MVC 在调用目标处理方法前，会先逐个调用在方法级上标注了@ModelAttribute 的方法。</div><div>在方法的入参前使用 @ModelAttribute 注解：可以从隐含对象中获取隐含的模型数据中获取对象，再将请求参数–绑定到对象中，再传入入参将方法入参对象添加到模型中。</div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>@RequestParam　</div></div><div><br/></div><div>在处理方法入参处使用 @RequestParam 可以把请求参 数传递给请求方法。</div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>@PathVariable</div></div><div><br/></div><div>绑定 URL 占位符到入参。</div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>@ExceptionHandler</div></div><div><br/></div><div>注解到方法上，出现异常时会执行该方法。</div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>@ControllerAdvice</div></div><div><br/></div><div>使一个Contoller成为全局的异常处理类，类中用@ExceptionHandler方法注解的方法可以处理所有Controller发生的异常。</div><div><br/></div><div><font style="font-size: 14pt;"><span style="font-size: 14pt; font-weight: bold;">四、自动匹配参数</span></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>//match automatically</div><div>    @RequestMapping(&quot;/person&quot;)</div><div>    public String toPerson(String name,double age){</div><div>        System.out.println(name+&quot; &quot;+age);</div><div>        return &quot;hello&quot;;</div><div>}</div></div><div><br/></div><div><font style="font-size: 14pt;"><span style="font-size: 14pt; font-weight: bold;">五、自动装箱</span></font></div><div><br/></div><div>1.编写一个Person实体类</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>package test.SpringMVC.model;</div><div><br/></div><div>public class Person {</div><div>    public String getName() {</div><div>        return name;</div><div>    }</div><div>    public void setName(String name) {</div><div>        this.name = name;</div><div>    }</div><div>    public int getAge() {</div><div>        return age;</div><div>    }</div><div>    public void setAge(int age) {</div><div>        this.age = age;</div><div>    }</div><div>    private String name;</div><div>    private int age;</div><div><br/></div><div>}</div></div><div><br/></div><div>2.在Controller里编写方法</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>//boxing automatically</div><div>    @RequestMapping(&quot;/person1&quot;)</div><div>    public String toPerson(Person p){</div><div>        System.out.println(p.getName()+&quot; &quot;+p.getAge());</div><div>        return &quot;hello&quot;;</div><div>    }</div></div><div><br/></div><div><font style="font-size: 14pt;"><span style="font-size: 14pt; font-weight: bold;">六、使用InitBinder来处理Date类型的参数</span></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>//the parameter was converted in initBinder</div><div>    @RequestMapping(&quot;/date&quot;)</div><div>    public String date(Date date){</div><div>        System.out.println(date);</div><div>        return &quot;hello&quot;;</div><div>    }</div><div><br/></div><div>    //At the time of initialization,convert the type &quot;String&quot; to type &quot;date&quot;</div><div>    @InitBinder</div><div>    public void initBinder(ServletRequestDataBinder binder){</div><div>        binder.registerCustomEditor(Date.class, new CustomDateEditor(new SimpleDateFormat(&quot;yyyy-MM-dd&quot;),</div><div>                true));</div><div>    }</div></div><div><font style="font-size: 14pt;"><span style="font-size: 14pt; font-weight: bold;">七、向前台传递参数</span></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>//pass the parameters to front-end</div><div>    @RequestMapping(&quot;/show&quot;)</div><div>    public String showPerson(Map&lt;String,Object&gt; map){</div><div>        Person p =new Person();</div><div>        map.put(&quot;p&quot;, p);</div><div>        p.setAge(20);</div><div>        p.setName(&quot;jayjay&quot;);</div><div>        return &quot;show&quot;;</div><div>    }</div></div><div><br/></div><div>前台可在Request域中取到&quot;p&quot;</div><div><br/></div><div><font style="font-size: 14pt;"><span style="font-size: 14pt; font-weight: bold;">八、使用Ajax调用</span></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>//pass the parameters to front-end using ajax</div><div>@RequestMapping(&quot;/getPerson&quot;)</div><div>   public void getPerson(String name,PrintWriter pw){</div><div>        pw.write(&quot;hello,&quot;+name);        </div><div>    }</div><div>   @RequestMapping(&quot;/name&quot;)</div><div>   public String sayHello(){</div><div>       return &quot;name&quot;;</div><div>    }</div></div><div>前台用下面的Jquery代码调用:</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>$(function(){</div><div>              $(&quot;#btn&quot;).click(function(){</div><div>                  $.post(&quot;mvc/getPerson&quot;,{name:$(&quot;#name&quot;).val()},function(data){</div><div>                      alert(data);</div><div>                  });</div><div>              });</div><div>          });</div></div><div><font style="font-size: 14pt;"><span style="font-size: 14pt; font-weight: bold;">九、在Controller中使用redirect方式处理请求</span></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>  //redirect</div><div>    @RequestMapping(&quot;/redirect&quot;)</div><div>    public String redirect(){</div><div>        return &quot;redirect:hello&quot;;</div><div>    }</div></div><div><br/></div><div><font style="font-size: 14pt;"><span style="font-size: 14pt; font-weight: bold;">十、文件上传</span></font></div><div><br/></div><div>1.需要导入两个jar包</div><div><img src="关于spring MVC_files/Image [2].png" type="image/png" data-filename="Image.png"/></div><div><br/></div><div>2.在SpringMVC配置文件中加入</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>&lt;!-- upload settings --&gt;</div><div>    &lt;bean id=&quot;multipartResolver&quot;  class=&quot;<a href="http://org.springframework.web.multipart.commons.commonsmultipartresolver/">org.springframework.web.multipart.commons.CommonsMultipartResolver</a>&quot;&gt;</div><div>        &lt;property name=&quot;maxUploadSize&quot; value=&quot;102400000&quot;&gt;&lt;/property&gt;</div><div>    &lt;/bean&gt;</div></div><div><br/></div><div>3.方法代码:</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>@RequestMapping(value=&quot;/upload&quot;,method=RequestMethod.POST)</div><div>    public String upload(HttpServletRequest req) throws Exception{</div><div>        MultipartHttpServletRequest mreq = (MultipartHttpServletRequest)req;</div><div>        MultipartFile file = mreq.getFile(&quot;file&quot;);</div><div>        String fileName = file.getOriginalFilename();</div><div>        SimpleDateFormat sdf = new SimpleDateFormat(&quot;yyyyMMddHHmmss&quot;);        </div><div>        FileOutputStream fos = new FileOutputStream(req.getSession().getServletContext().getRealPath(&quot;/&quot;)+</div><div>                &quot;upload/&quot;+sdf.format(new Date())+fileName.substring(fileName.lastIndexOf('.')));</div><div>        fos.write(file.getBytes());</div><div>        fos.flush();</div><div>        fos.close();</div><div><br/></div><div>        return &quot;hello&quot;;</div><div>    }</div></div><div><br/></div><div>4.前台form表单</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>  &lt;form action=&quot;mvc/upload&quot; method=&quot;post&quot; enctype=&quot;multipart/form-data&quot;&gt;</div><div>       &lt;input type=&quot;file&quot; name=&quot;file&quot;&gt;</div><div><br/></div><div>       &lt;input type=&quot;submit&quot; value=&quot;submit&quot;&gt;</div><div>  &lt;/form&gt;</div></div><div><br/></div><div><font style="font-size: 14pt;"><span style="font-size: 14pt; font-weight: bold;">十一、使用@RequestParam注解指定参数的name</span></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>@Controller</div><div>@RequestMapping(&quot;/test&quot;)</div><div>public class mvcController1 {</div><div>    @RequestMapping(value=&quot;/param&quot;)</div><div>    public String testRequestParam(@RequestParam(value=&quot;id&quot;) Integer id,</div><div>            @RequestParam(value=&quot;name&quot;)String name){</div><div>        System.out.println(id+&quot; &quot;+name);</div><div>        return &quot;/hello&quot;;</div><div>    }    </div><div>}</div></div><div><br/></div><div><font style="font-size: 14pt;"><span style="font-size: 14pt; font-weight: bold;">十二、RESTFul风格的SringMVC</span></font></div><div><br/></div><div>1.RestController</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>@Controller</div><div>@RequestMapping(&quot;/rest&quot;)</div><div>public class RestController {</div><div>    @RequestMapping(value=&quot;/user/{id}&quot;,method=RequestMethod.GET)</div><div>    public String get(@PathVariable(&quot;id&quot;) Integer id){</div><div>        System.out.println(&quot;get&quot;+id);</div><div>        return &quot;/hello&quot;;</div><div>    }</div><div><br/></div><div>    @RequestMapping(value=&quot;/user/{id}&quot;,method=RequestMethod.POST)</div><div>    public String post(@PathVariable(&quot;id&quot;) Integer id){</div><div>        System.out.println(&quot;post&quot;+id);</div><div>        return &quot;/hello&quot;;</div><div>    }</div><div><br/></div><div>    @RequestMapping(value=&quot;/user/{id}&quot;,method=RequestMethod.PUT)</div><div>    public String put(@PathVariable(&quot;id&quot;) Integer id){</div><div>        System.out.println(&quot;put&quot;+id);</div><div>        return &quot;/hello&quot;;</div><div>    }</div><div><br/></div><div>    @RequestMapping(value=&quot;/user/{id}&quot;,method=RequestMethod.DELETE)</div><div>    public String delete(@PathVariable(&quot;id&quot;) Integer id){</div><div>        System.out.println(&quot;delete&quot;+id);</div><div>        return &quot;/hello&quot;;</div><div>    }</div><div><br/></div><div>}</div></div><div>2.form表单发送put和delete请求</div><div><br/></div><div>在web.xml中配置</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>&lt;!-- configure the HiddenHttpMethodFilter,convert the post method to put or delete --&gt;</div><div>  &lt;filter&gt;</div><div>      &lt;filter-name&gt;HiddenHttpMethodFilter&lt;/filter-name&gt;</div><div>      &lt;filter-class&gt;org.springframework.web.filter.HiddenHttpMethodFilter&lt;/filter-class&gt;</div><div>  &lt;/filter&gt;</div><div>  &lt;filter-mapping&gt;</div><div>      &lt;filter-name&gt;HiddenHttpMethodFilter&lt;/filter-name&gt;</div><div>      &lt;url-pattern&gt;/*&lt;/url-pattern&gt;</div><div>  &lt;/filter-mapping&gt;</div></div><div><br/></div><div>在前台可以用以下代码产生请求</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>&lt;form action=&quot;rest/user/1&quot; method=&quot;post&quot;&gt;</div><div>        &lt;input type=&quot;hidden&quot; name=&quot;_method&quot; value=&quot;PUT&quot;&gt;</div><div>        &lt;input type=&quot;submit&quot; value=&quot;put&quot;&gt;</div><div>    &lt;/form&gt;</div><div><br/></div><div>    &lt;form action=&quot;rest/user/1&quot; method=&quot;post&quot;&gt;</div><div>        &lt;input type=&quot;submit&quot; value=&quot;post&quot;&gt;</div><div>    &lt;/form&gt;</div><div><br/></div><div>    &lt;form action=&quot;rest/user/1&quot; method=&quot;get&quot;&gt;</div><div>        &lt;input type=&quot;submit&quot; value=&quot;get&quot;&gt;</div><div>    &lt;/form&gt;</div><div><br/></div><div>    &lt;form action=&quot;rest/user/1&quot; method=&quot;post&quot;&gt;</div><div>        &lt;input type=&quot;hidden&quot; name=&quot;_method&quot; value=&quot;DELETE&quot;&gt;</div><div>        &lt;input type=&quot;submit&quot; value=&quot;delete&quot;&gt;</div><div>    &lt;/form&gt;</div></div><div><font style="font-size: 14pt;"><span style="font-size: 14pt; font-weight: bold;">十三、返回json格式的字符串</span></font></div><div><br/></div><div>1.导入以下jar包</div><div><br/></div><div><img src="关于spring MVC_files/Image [3].png" type="image/png" data-filename="Image.png"/></div><div>2.方法代码</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>@Controller</div><div>@RequestMapping(&quot;/json&quot;)</div><div>public class jsonController {</div><div><br/></div><div>    @ResponseBody</div><div>    @RequestMapping(&quot;/user&quot;)</div><div>    public  User get(){</div><div>        User u = new User();</div><div>        u.setId(1);</div><div>        u.setName(&quot;jayjay&quot;);</div><div>        u.setBirth(new Date());</div><div>        return u;</div><div>    }</div><div>}</div></div><div><br/></div><div><font style="font-size: 14pt;"><span style="font-size: 14pt; font-weight: bold;">十四、异常的处理</span></font></div><div><br/></div><div>1.处理局部异常（Controller内）</div><div> </div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>   @ExceptionHandler</div><div>    public ModelAndView exceptionHandler(Exception ex){</div><div>        ModelAndView mv = new ModelAndView(&quot;error&quot;);</div><div>        mv.addObject(&quot;exception&quot;, ex);</div><div>        System.out.println(&quot;in testExceptionHandler&quot;);</div><div>        return mv;</div><div>    }</div><div><br/></div><div>    @RequestMapping(&quot;/error&quot;)</div><div>    public String error(){</div><div>        int i = 5/0;</div><div>        return &quot;hello&quot;;</div><div>    }</div></div><div><br/></div><div><br/></div><div>2.处理全局异常（所有Controller）</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>@ControllerAdvice</div><div>public class testControllerAdvice {</div><div>    @ExceptionHandler</div><div>    public ModelAndView exceptionHandler(Exception ex){</div><div>        ModelAndView mv = new ModelAndView(&quot;error&quot;);</div><div>        mv.addObject(&quot;exception&quot;, ex);</div><div>        System.out.println(&quot;in testControllerAdvice&quot;);</div><div>        return mv;</div><div>    }</div><div>}</div></div><div><br/></div><div>3.另一种处理全局异常的方法</div><div><br/></div><div>在SpringMVC配置文件中配置</div><div> </div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>   &lt;!-- configure SimpleMappingExceptionResolver --&gt;</div><div>    &lt;bean class=&quot;org.springframework.web.servlet.handler.SimpleMappingExceptionResolver&quot;&gt;</div><div>        &lt;property name=&quot;exceptionMappings&quot;&gt;</div><div>            &lt;props&gt;</div><div>                &lt;prop key=&quot;java.lang.ArithmeticException&quot;&gt;error&lt;/prop&gt;</div><div>            &lt;/props&gt;</div><div>        &lt;/property&gt;</div><div>    &lt;/bean&gt;</div></div><div><br/></div><div>error是出错页面.</div><div><br/></div><div><font style="font-size: 14pt;"><span style="font-size: 14pt; font-weight: bold;">十五、设置一个自定义拦截器</span></font></div><div><br/></div><div>1.创建一个MyInterceptor类，并实现HandlerInterceptor接口</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>public class MyInterceptor implements HandlerInterceptor {</div><div><br/></div><div>    @Override</div><div>    public void afterCompletion(HttpServletRequest arg0,</div><div>            HttpServletResponse arg1, Object arg2, Exception arg3)</div><div>            throws Exception {</div><div>        System.out.println(&quot;afterCompletion&quot;);</div><div>    }</div><div><br/></div><div>    @Override</div><div>    public void postHandle(HttpServletRequest arg0, HttpServletResponse arg1,</div><div>            Object arg2, ModelAndView arg3) throws Exception {</div><div>        System.out.println(&quot;postHandle&quot;);</div><div>    }</div><div><br/></div><div>    @Override</div><div>    public boolean preHandle(HttpServletRequest arg0, HttpServletResponse arg1,</div><div>            Object arg2) throws Exception {</div><div>        System.out.println(&quot;preHandle&quot;);</div><div>        return true;</div><div>    }</div><div><br/></div><div>}</div></div><div><br/></div><div>2.在SpringMVC的配置文件中配置</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>    &lt;!-- interceptor setting --&gt;</div><div>    &lt;mvc:interceptors&gt;</div><div>        &lt;mvc:interceptor&gt;</div><div>            &lt;mvc:mapping path=&quot;/mvc/**&quot;/&gt;</div><div>            &lt;bean class=&quot;test.SpringMVC.Interceptor.MyInterceptor&quot;&gt;&lt;/bean&gt;</div><div>        &lt;/mvc:interceptor&gt;        </div><div>    &lt;/mvc:interceptors&gt;</div></div><div><font style="font-size: 14pt;"><span style="font-size: 14pt; font-weight: bold;">十六、表单的验证（使用Hibernate-validate）及国际化</span></font></div><div><br/></div><div>1.导入Hibernate-validate需要的jar包</div><div><img src="关于spring MVC_files/Image [4].png" type="image/png" data-filename="Image.png"/></div><div>2.编写实体类User并加上验证注解</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>public class User {</div><div>    public int getId() {</div><div>        return id;</div><div>    }</div><div>    public void setId(int id) {</div><div>        this.id = id;</div><div>    }</div><div>    public String getName() {</div><div>        return name;</div><div>    }</div><div>    public void setName(String name) {</div><div>        this.name = name;</div><div>    }</div><div>    public Date getBirth() {</div><div>        return birth;</div><div>    }</div><div>    public void setBirth(Date birth) {</div><div>        this.birth = birth;</div><div>    }</div><div>    @Override</div><div>    public String toString() {</div><div>        return &quot;User [id=&quot; + id + &quot;, name=&quot; + name + &quot;, birth=&quot; + birth + &quot;]&quot;;</div><div>    }    </div><div>    private int id;</div><div>    @NotEmpty</div><div>    private String name;</div><div><br/></div><div>    @Past</div><div>    @DateTimeFormat(pattern=&quot;yyyy-MM-dd&quot;)</div><div>    private Date birth;</div><div>}</div></div><div><br/></div><div>ps:@Past表示时间必须是一个过去值</div><div><br/></div><div>3.在jsp中使用SpringMVC的form表单</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>&lt;form:form action=&quot;form/add&quot; method=&quot;post&quot; modelAttribute=&quot;user&quot;&gt;</div><div>        id:&lt;form:input path=&quot;id&quot;/&gt;&lt;form:errors path=&quot;id&quot;/&gt;</div><div><br/></div><div>        name:&lt;form:input path=&quot;name&quot;/&gt;&lt;form:errors path=&quot;name&quot;/&gt;</div><div><br/></div><div>        birth:&lt;form:input path=&quot;birth&quot;/&gt;&lt;form:errors path=&quot;birth&quot;/&gt;</div><div>        &lt;input type=&quot;submit&quot; value=&quot;submit&quot;&gt;</div><div>    &lt;/form:form&gt;</div></div><div>ps:path对应name</div><div><br/></div><div>4.Controller中代码</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>@Controller</div><div>@RequestMapping(&quot;/form&quot;)</div><div>public class formController {</div><div>    @RequestMapping(value=&quot;/add&quot;,method=RequestMethod.POST)    </div><div>    public String add(@Valid User u,BindingResult br){</div><div>        if(br.getErrorCount()&gt;0){            </div><div>            return &quot;addUser&quot;;</div><div>        }</div><div>        return &quot;showUser&quot;;</div><div>    }</div><div><br/></div><div>    @RequestMapping(value=&quot;/add&quot;,method=RequestMethod.GET)</div><div>    public String add(Map&lt;String,Object&gt; map){</div><div>        map.put(&quot;user&quot;,new User());</div><div>        return &quot;addUser&quot;;</div><div>    }</div><div>}</div></div><div>ps:  1.因为jsp中使用了modelAttribute属性，所以必须在request域中有一个&quot;user&quot;.</div><div>　　2.@Valid 表示按照在实体上标记的注解验证参数</div><div>　　3.返回到原页面错误信息回回显，表单也会回显</div><div><br/></div><div>5.错误信息自定义</div><div><br/></div><div>在src目录下添加locale.properties</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>NotEmpty.user.name=name can't not be empty</div><div>Past.user.birth=birth should be a past value</div><div>DateTimeFormat.user.birth=the format of input is wrong</div><div>typeMismatch.user.birth=the format of input is wrong</div><div>typeMismatch.user.id=the format of input is wrong</div></div><div>在SpringMVC配置文件中配置</div><div>  </div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>  &lt;!-- configure the locale resource --&gt;</div><div>    &lt;bean id=&quot;messageSource&quot; class=&quot;org.springframework.context.support.ResourceBundleMessageSource&quot;&gt;</div><div>        &lt;property name=&quot;basename&quot; value=&quot;locale&quot;&gt;&lt;/property&gt;</div><div>    &lt;/bean&gt;</div></div><div><br/></div><div><br/></div><div>6.国际化显示</div><div><br/></div><div>在src下添加locale_zh_CN.properties</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>username=账号</div><div>password=密码</div></div><div><br/></div><div>locale.properties中添加</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>username=user name</div><div>password=password</div></div><div><br/></div><div>创建一个locale.jsp</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>&lt;body&gt;</div><div>    &lt;fmt:message key=&quot;username&quot;&gt;&lt;/fmt:message&gt;</div><div>    &lt;fmt:message key=&quot;password&quot;&gt;&lt;/fmt:message&gt;</div><div>&lt;/body&gt;</div></div><div><br/></div><div>在SpringMVC中配置</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>  &lt;!-- make the jsp page can be visited --&gt;</div><div>  &lt;mvc:view-controller path=&quot;/locale&quot; view-name=&quot;locale&quot;/&gt;</div></div><div><br/></div><div>让locale.jsp在WEB-INF下也能直接访问</div><div><br/></div><div>最后，访问locale.jsp，切换浏览器语言，能看到账号和密码的语言也切换了。</div><div><br/></div><div><font style="font-size: 14pt;"><span style="font-size: 14pt; font-weight: bold;">十七、压轴大戏--整合SpringIOC和SpringMVC</span></font></div><div><br/></div><div>1.创建一个test.SpringMVC.integrate的包用来演示整合，并创建各类</div><div><img src="关于spring MVC_files/Image [5].png" type="image/png" data-filename="Image.png"/></div><div>2.User实体类</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>public class User {</div><div>    public int getId() {</div><div>        return id;</div><div>    }</div><div>    public void setId(int id) {</div><div>        this.id = id;</div><div>    }</div><div>    public String getName() {</div><div>        return name;</div><div>    }</div><div>    public void setName(String name) {</div><div>        this.name = name;</div><div>    }</div><div>    public Date getBirth() {</div><div>        return birth;</div><div>    }</div><div>    public void setBirth(Date birth) {</div><div>        this.birth = birth;</div><div>    }</div><div>    @Override</div><div>    public String toString() {</div><div>        return &quot;User [id=&quot; + id + &quot;, name=&quot; + name + &quot;, birth=&quot; + birth + &quot;]&quot;;</div><div>    }    </div><div>    private int id;</div><div>    @NotEmpty</div><div>    private String name;</div><div><br/></div><div>    @Past</div><div>    @DateTimeFormat(pattern=&quot;yyyy-MM-dd&quot;)</div><div>    private Date birth;</div><div>}</div></div><div><br/></div><div>3.UserService类</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>@Component</div><div>public class UserService {</div><div>    public UserService(){</div><div>        System.out.println(&quot;UserService Constructor...\n\n\n\n\n\n&quot;);</div><div>    }</div><div><br/></div><div>    public void save(){</div><div>        System.out.println(&quot;save&quot;);</div><div>    }</div><div>}</div></div><div><br/></div><div>4.UserController</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>@Controller</div><div>@RequestMapping(&quot;/integrate&quot;)</div><div>public class UserController {</div><div>    @Autowired</div><div>    private UserService userService;</div><div><br/></div><div>    @RequestMapping(&quot;/user&quot;)</div><div>    public String saveUser(@RequestBody @ModelAttribute User u){</div><div>        System.out.println(u);</div><div>        userService.save();</div><div>        return &quot;hello&quot;;</div><div>    }</div><div>}</div></div><div><br/></div><div>5.Spring配置文件</div><div><br/></div><div>在src目录下创建SpringIOC的配置文件applicationContext.xml</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</div><div>&lt;beans xmlns=&quot;<a href="http://www.springframework.org/schema/beans">http://www.springframework.org/schema/beans</a>&quot;</div><div>    xmlns:xsi=&quot;<a href="http://www.w3.org/2001/XMLSchema-instance">http://www.w3.org/2001/XMLSchema-instance</a>&quot;</div><div>    xsi:schemaLocation=&quot;<a href="http://www.springframework.org/schema/beans">http://www.springframework.org/schema/beans</a></div><div><a href="http://www.springframework.org/schema/beans/spring-beans.xsd">http://www.springframework.org/schema/beans/spring-beans.xsd</a></div><div><a href="http://www.springframework.org/schema/util">http://www.springframework.org/schema/util</a></div><div><a href="http://www.springframework.org/schema/util/spring-util-4.0.xsd">http://www.springframework.org/schema/util/spring-util-4.0.xsd</a></div><div><a href="http://www.springframework.org/schema/context">http://www.springframework.org/schema/context</a></div><div><a href="http://www.springframework.org/schema/context/spring-context.xsd">http://www.springframework.org/schema/context/spring-context.xsd</a></div><div>        &quot;</div><div>        xmlns:util=&quot;<a href="http://www.springframework.org/schema/util">http://www.springframework.org/schema/util</a>&quot;</div><div>        xmlns:p=&quot;<a href="http://www.springframework.org/schema/p">http://www.springframework.org/schema/p</a>&quot;</div><div>        xmlns:context=&quot;<a href="http://www.springframework.org/schema/context">http://www.springframework.org/schema/context</a>&quot;    </div><div>        &gt;</div><div>    &lt;context:component-scan base-package=&quot;test.SpringMVC.integrate&quot;&gt;</div><div>        &lt;context:exclude-filter type=&quot;annotation&quot;</div><div>            expression=&quot;org.springframework.stereotype.Controller&quot;/&gt;</div><div>        &lt;context:exclude-filter type=&quot;annotation&quot;</div><div>            expression=&quot;org.springframework.web.bind.annotation.ControllerAdvice&quot;/&gt;        </div><div>    &lt;/context:component-scan&gt;</div><div><br/></div><div>&lt;/beans&gt;</div></div><div><br/></div><div>在Web.xml中添加配置</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>&lt;!-- configure the springIOC --&gt;</div><div>  &lt;listener&gt;</div><div>      &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;</div><div>  &lt;/listener&gt;</div><div>  &lt;context-param&gt;  </div><div>    &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;  </div><div>    &lt;param-value&gt;classpath:applicationContext.xml&lt;/param-value&gt;</div><div>  &lt;/context-param&gt;</div></div><div><br/></div><div>6.在SpringMVC中进行一些配置，防止SpringMVC和SpringIOC对同一个对象的管理重合。</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>&lt;!-- scan the package and the sub package --&gt;</div><div>    &lt;context:component-scan base-package=&quot;test.SpringMVC.integrate&quot;&gt;</div><div>        &lt;context:include-filter type=&quot;annotation&quot;</div><div>            expression=&quot;org.springframework.stereotype.Controller&quot;/&gt;</div><div>        &lt;context:include-filter type=&quot;annotation&quot;</div><div>            expression=&quot;org.springframework.web.bind.annotation.ControllerAdvice&quot;/&gt;</div><div>    &lt;/context:component-scan&gt;</div></div><div><br/></div><div><font style="font-size: 14pt;"><span style="font-size: 14pt; font-weight: bold;">十八、SpringMVC详细运行流程图</span></font></div><div><img src="关于spring MVC_files/Image [6].png" type="image/png" data-filename="Image.png" width="609"/></div><div><font style="font-size: 14pt;"><span style="font-size: 14pt; font-weight: bold;">十九、SpringMVC运行原理</span></font></div><div><br/></div><div>客户端请求提交到DispatcherServlet；</div><div>由DispatcherServlet控制器查询一个或多个HandlerMapping，找到处理请求的Controller；</div><div>DispatcherServlet将请求提交到Controller；</div><div>Controller调用业务逻辑处理后，返回ModelAndView；</div><div>DispatcherServlet查询一个或多个ViewResoler视图解析器，找到ModelAndView指定的视图；</div><div>视图负责将结果显示到客户端。</div><div><br/></div><div><font style="font-size: 14pt;"><span style="font-size: 14pt; font-weight: bold;">二十、SpringMVC与struts2的区别</span></font></div><div><br/></div><div>1、springmvc基于方法开发的，struts2基于类开发的。springmvc将url和controller里的方法映射。映射成功后springmvc生成一个Handler对象，对象中只包括了一个method。方法执行结束，形参数据销毁。springmvc的controller开发类似web service开发。</div><div>2、springmvc可以进行单例开发，并且建议使用单例开发，struts2通过类的成员变量接收参数，无法使用单例，只能使用多例。</div><div>3、经过实际测试，struts2速度慢，在于使用struts标签，如果使用struts建议使用jstl。</div><div><br/></div><div><br/></div><div><br/></div><div><br/></div></span>
</div></body></html> 